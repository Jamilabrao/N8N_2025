{"createdAt":"2024-11-01T21:23:05.659Z","updatedAt":"2025-08-01T13:12:41.507Z","id":"Y1W8UaOm54QVwWy6","name":"[WHATSAPP] - SUPERGRUPO JAMIL","active":false,"isArchived":false,"nodes":[{"parameters":{"content":"## COMANDO PUBLI ELITE","height":240.69732392803536,"width":533.2782647118129},"id":"be9ac2f7-506e-4da7-b284-dfca42cc93a7","name":"Sticky Note5","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-80,1808]},{"parameters":{"assignments":{"assignments":[{"id":"3df5be45-f7f7-4297-a1ad-0da61420e6a6","name":"botao.titulo","value":"PAPO RETO - ELITE 🔒","type":"string"},{"id":"a8a466c4-6cd7-4b40-9071-aecadb9fe926","name":"botao.mensagem","value":"🚨🚨 *ATENÇÃO, OPORTUNIDADE ÚNICA!* 🚨🚨\\n\\n🔥 ENTRE PARA O PAPO RETO ELITE 🔥\\n🔒 GRUPO FECHADO, EXCLUSIVO E ALTAMENTE ATIVO 🔒\\n\\nEstamos reabrindo vagas para o Papo Reto Elite, nosso espaço privado para quem quer estar ao lado de quem realmente entende de network, marketing, hot, designers, programação e tenha oportunidades reais.\\nConecte-se, aprenda e cresça com quem já está na frente!\\n\\n💬 O QUE VOCÊ GANHA COMO MEMBRO:\\n\\nAcesso a contatos estratégicos\\nBenefícios e conteúdos exclusivos\\nSuporte para impulsionar sua jornada\\nAmbiente fechado onde quem faz diferença se encontra!\\n\\n💸 PLANOS DE ACESSO ESPECIAL:\\n📅 01 Mês - R$ 47,00\\n📅 03 Meses - R$ 117,00\\n📅 01 Ano - R$ 197,00\\n\\nEscolha o plano que mais se adapta à sua meta e entre para o time de quem quer mais. Quer saber o que rola lá dentro?\\nNão deixe essa chance passar! 👇","type":"string"},{"id":"ee8dc9bf-eedd-45e5-a2e9-2a554936c903","name":"botao.url","value":"https://lastlink.com/p/CD23EC054/checkout-payment/","type":"string"}]},"options":{}},"id":"441b3ff4-2781-4915-943c-3b964a9178b9","name":"DADOS BOTAO5","type":"n8n-nodes-base.set","typeVersion":3.3,"position":[-16,1840]},{"parameters":{"assignments":{"assignments":[{"id":"744c0e87-4a0c-4818-b281-5b83b7c5e9f5","name":"data.numero","value":"={{ $json.participante }}","type":"string"},{"id":"c953c65b-60f0-4564-a686-7de49801e353","name":"data.urlapi","value":"https://whatsapi.typebot.pro","type":"string"},{"id":"461e2770-82e0-4af8-9fba-761fdf08a7d2","name":"data.instancia","value":"={{ $('Webhook').item.json.body.instance }}","type":"string"},{"id":"f1d06dba-5d8b-42dd-af60-75547ec05738","name":"data.globalapi","value":"b4d71f9c38e3ac12a6b08e4b6d53aa90","type":"string"},{"id":"0de92c80-a4ad-46d2-98ad-e01536be0f67","name":"data.apikey","value":"b4d71f9c38e3ac12a6b08e4b6d53aa90","type":"string"},{"id":"b9a7f52a-4adb-4e1b-a588-5161815f93c3","name":"data.acao","value":"={{ $('Webhook').item.json.body.data.message.conversation }}","type":"string"},{"id":"6fb2e3a5-6827-474a-b3a9-0f2ab28bec79","name":"contato","value":"={{ $('Webhook').item.json.body.data.key.remoteJid }}","type":"string"}]},"options":{}},"id":"3da8e164-798c-44b1-8075-4e9d79abd4ad","name":"DADOS","type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-1856,3344]},{"parameters":{"content":"## COMANDO INSTAGRAM","height":231.04029539655335,"width":530.7695811579857},"id":"d7ea8e67-b9a6-4e48-a4c7-12569f32b9ec","name":"Sticky Note6","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-80,2064]},{"parameters":{"assignments":{"assignments":[{"id":"3df5be45-f7f7-4297-a1ad-0da61420e6a6","name":"botao.titulo","value":"INSTAGRAM JAMIL ABRÃO","type":"string"},{"id":"a8a466c4-6cd7-4b40-9071-aecadb9fe926","name":"botao.mensagem","value":"=Quer aprender mais sobre iGaming, Ads e automações que vão turbinar seus resultados?\\n🔥 Me segue por lá e acompanhe dicas, estratégias e insights exclusivos!\\nVamos juntos elevar o nível do seu game e automatizar o que for possível.\\n\\n🚀📲 #iGaming #Ads #Automação #MarketingDigital","type":"string"},{"id":"9b918f37-fe4b-4f0e-b0e6-74e50c1c408f","name":"botao.legenda","value":"SEGUIR AGORA","type":"string"},{"id":"ee8dc9bf-eedd-45e5-a2e9-2a554936c903","name":"botao.url","value":"https://www.instagram.com/jamilabrao/","type":"string"}]},"options":{}},"id":"864f0f96-92e6-421e-a622-d552618de847","name":"DADOS BOTAO6","type":"n8n-nodes-base.set","typeVersion":3.3,"position":[0,2128]},{"parameters":{"content":"## COMANDO AREA DE MEMBROS","height":231.04029539655335,"width":530.7695811579857},"id":"68028d04-a442-4464-9403-a9b393a40477","name":"Sticky Note7","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-80,2320]},{"parameters":{"assignments":{"assignments":[{"id":"3df5be45-f7f7-4297-a1ad-0da61420e6a6","name":"botao.titulo","value":"ASGARD ACADEMY - CADASTRO","type":"string"},{"id":"a8a466c4-6cd7-4b40-9071-aecadb9fe926","name":"botao.mensagem","value":"=🚀 Atenção, Lobos da ASGARD ACADEMY!🚀\\n\\nA nossa comunidade exclusiva já está disponível no WhatsApp! 🎯💬\\n\\n👉 Para garantir o seu acesso, basta clicar no botão abaixo!\\n\\n🔓 Não é aluno ainda? Sem problema!\\nPreencha o e-mail no mesmo link e nós te direcionamos para começar essa jornada com a gente na *ASGARD ACADEMY*! 😉\\n\\nJunte-se agora e faça parte dessa comunidade incrível! 🌟👊\\n\\n#AsgardAcademy #ComunidadeExclusiva #JuntosSomosMaisFortes","type":"string"},{"id":"9b918f37-fe4b-4f0e-b0e6-74e50c1c408f","name":"botao.legenda","value":"ACESSAR ASGARD ACADEMY","type":"string"},{"id":"ee8dc9bf-eedd-45e5-a2e9-2a554936c903","name":"botao.url","value":"https://membros.teamasgard.com.br","type":"string"}]},"options":{}},"id":"266b2781-2c82-403d-924f-0b3d1e6214c4","name":"DADOS BOTAO7","type":"n8n-nodes-base.set","typeVersion":3.3,"position":[0,2384]},{"parameters":{"content":"## COMANDO PAPO RETO - MKT","height":231.04029539655335,"width":530.7695811579857},"id":"c0eb7584-1db1-4015-b9ea-9e5d7fff7c28","name":"Sticky Note","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-80,2592]},{"parameters":{"assignments":{"assignments":[{"id":"3df5be45-f7f7-4297-a1ad-0da61420e6a6","name":"botao.titulo","value":"CONVITE - PAPO RETO MARKETING","type":"string"},{"id":"a8a466c4-6cd7-4b40-9071-aecadb9fe926","name":"botao.mensagem","value":"=Tenha acesso ao nosso *NETWORK EXCLUSIVO*\\n\\nLeia com atenção as regras antes de clicar para entrar no GRUPO\\n\\n🚫PROIBIDO DIVULGAÇÃO SEM AUTORIZAÇÃO DO ADM/DONO\\n🚫PROIBIDO NEGOCIAÇÕES DE CONTAS TERCEIRAS (INSTAGRAM, TIKTOK, KAWAI E ETC)\\n🚫 PROIBIDO MANDAR OU CHAMAR PV PARA VENDAS E ETC\\n❌ PROIBIDO ASSUNTOS SOBRE MÉTODOS, MEIOS E GOLPES SOBRE AS CASAS DE APOSTAS\\n❌🇨🇳 PROIBIDO ASSUNTOS SOBRE CASAS CHINESAS SOBRE ACORDOS, MÉTODOS E ETC\\n🔞 PROIBIDO POSTAGENS DE CUNHO SEXUAL (PORNOGRAFIA)\\n😡 PROIBIDO DESONRAR E HUMILHAR PARTICIPANTES\\n🤬 PROIBIDO OFENDER E XINGAR OS MEMBROS\\n🙅‍♂️ NÃO CHAMAR PV SEM AUTORIZAÇÃO DOS MEMBROS\\n🎙️PROIBIDO MANDAR ÁUDIO EM VISUALIZAÇÃO ÚNICA","type":"string"},{"id":"9b918f37-fe4b-4f0e-b0e6-74e50c1c408f","name":"botao.legenda","value":"ACESSAR GRUPO PAPO RETO - MARKETING","type":"string"},{"id":"ee8dc9bf-eedd-45e5-a2e9-2a554936c903","name":"botao.url","value":"https://chat.whatsapp.com/HdbOtjvb8sRJ7XKE97aACm","type":"string"}]},"options":{}},"id":"3094f197-1710-4b4f-9399-533568c46cb0","name":"DADOS BOTAO","type":"n8n-nodes-base.set","typeVersion":3.3,"position":[0,2640]},{"parameters":{"content":"## COMANDO TYPEBOT.PRO","height":233.15141572191064,"width":530.4422025971487},"id":"2eddb720-3d55-4dad-951f-d027aa5e2a47","name":"Sticky Note2","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-80,2848]},{"parameters":{"assignments":{"assignments":[{"id":"3df5be45-f7f7-4297-a1ad-0da61420e6a6","name":"botao.titulo","value":"TENHA SEU TYPEBOT (Planos Mensais)","type":"string"},{"id":"a8a466c4-6cd7-4b40-9071-aecadb9fe926","name":"botao.mensagem","value":"=TENHA SEU TYPEBOT COM PREÇO TOP\\n✨ LIBERAÇÃO AUTOMÁTICA APÓS A COMPRA\\n\\n🚀 Transforme sua comunicação com nossos planos pensados para atender diferentes necessidades. Escolha o que melhor se encaixa no seu negócio:\\n\\nPLANO STARTER - Apenas R$ 39,00/mês\\n✅ Chatbots Ilimitados\\n✅ 2 Vagas no time\\n✅ 2.000 chats/mês\\n✅ 2 GB de armazenamento\\n✅ Receber arquivos de usuários\\n✅ Criação de pastas\\n✅ Integrações Nativas\\n✅ Webhooks\\n✅ Custom JavaScript\\nLINK DE COMPRA:\\nhttps://lastlink.com/p/C006ED601/\\n\\nPLANO PRO - Apenas R$ 99,00/mês\\n💎 Chatbots Ilimitados\\n💎 5 Vagas no time\\n💎 10.000 chats/mês\\n💎 10 GB de armazenamento\\n💎 Receber arquivos de usuários\\n💎 Criação de pastas\\n💎 Integrações Nativas\\n💎 Webhooks\\n💎 Custom JavaScript\\n💎 Análises Aprofundadas\\nLINK DE COMPRA:\\nhttps://lastlink.com/p/C7505A1C6/\\n\\n✨ É MUITO SIMPLES USAR!\\nVocê só precisa arrastar e soltar alguns blocos para criar seu chatbot. E se precisar de algo customizado, basta adicionar seu próprio código!\\n\\n🎁 BÔNUS ESPECIAL\\nAo assinar qualquer um dos nossos planos, você ainda ganha +500 fluxos prontos e acesso exclusivo à nossa Comunidade no Telegram!","type":"string"},{"id":"9b918f37-fe4b-4f0e-b0e6-74e50c1c408f","name":"botao.legenda","value":"SABER MAIS SOBRE NOSSO TYPEBOT","type":"string"},{"id":"ee8dc9bf-eedd-45e5-a2e9-2a554936c903","name":"botao.url","value":"https://www.typebot.pro/","type":"string"}]},"options":{}},"id":"03006a8e-789f-4401-8a9b-0b11528914f6","name":"DADOS BOTAO2","type":"n8n-nodes-base.set","typeVersion":3.3,"position":[0,2912]},{"parameters":{"assignments":{"assignments":[{"id":"adf8fb7a-f683-4f22-9275-fb22dc9539de","name":"grupo","value":"={{ $('Webhook').item.json.body.data.key.remoteJid }}","type":"string"},{"id":"829178d5-1df2-4e14-a20e-c902bb637194","name":"contato","value":"={{ $('Webhook').item.json.body.data.contextInfo.participant }}","type":"string"},{"id":"6137c626-487a-478a-9fa8-2d1cc9ebf1bd","name":"ordem","value":"={{ $('Webhook').item.json.body.data.message.conversation }}","type":"string"}]},"options":{}},"id":"726bd148-9663-4caf-920d-40030c1fbfcc","name":"GRUPO E CONTATO","type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-3056,4352]},{"parameters":{"content":"# COMANDO REMOVER, ADD, PROMOVER","height":769.7815479584049,"width":915.7322798070378,"color":3},"id":"1bd32105-2a64-468f-8a01-e551ca8a8fbf","name":"Sticky Note3","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-3120,3872]},{"parameters":{"content":"## COMANDO FORUM BETTALK","height":233.15141572191064,"width":529.8209964749201},"id":"af4802e8-07ee-4c52-9d9a-aa2ca79c3644","name":"Sticky Note4","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-80,3104]},{"parameters":{"assignments":{"assignments":[{"id":"3df5be45-f7f7-4297-a1ad-0da61420e6a6","name":"botao.titulo","value":"BETTALK - O FORUM MAIS COMPLETO E GRATUITO","type":"string"},{"id":"a8a466c4-6cd7-4b40-9071-aecadb9fe926","name":"botao.mensagem","value":"=🧠💬 Conheça o BETTALK, o fórum completo para você que busca conhecimento e trocas de ideias! 💥\\n\\n🚀 Temos categorias para todos os gostos:\\n\\n🎲 iGaming / Cassino - Fique por dentro das novidades e estratégias!\\n🖤 Black (Dark do MKT) - Descubra os segredos do marketing underground.\\n📚 Tutoriais - Aprenda passo a passo sobre diversos assuntos.\\n💰 Onde Vender Meus Produtos - Encontre o melhor caminho para suas vendas.\\n📘 Facebook, 📲 Telegram, 🎵 TikTok, 🟢 Whatsapp, 📸 Instagram - Troque dicas sobre todas as redes sociais!\\n🛠️ Ferramentas e Hack's - Melhore sua performance com as melhores ferramentas.\\n🤖 Typebot - Explore automações poderosas.\\n💻 Hacking - Para os curiosos da tecnologia.\\n🔥 Hot +18 - Conteúdos especiais para maiores de idade.\\n📈 Marketing Digital (PLR, info e etc) - Tudo sobre produtos digitais e estratégias.\\n\\n🔓 O acesso é 100% gratuito! Basta se cadastrar e mergulhar nessa comunidade cheia de conhecimento! 💬👇\\n\\n👉 Junte-se agora ao BETTALK e participe das conversas que vão transformar seu jogo!","type":"string"},{"id":"9b918f37-fe4b-4f0e-b0e6-74e50c1c408f","name":"botao.legenda","value":"ACESSAR BETTALK","type":"string"},{"id":"ee8dc9bf-eedd-45e5-a2e9-2a554936c903","name":"botao.url","value":"https://www.bettalk.com.br/","type":"string"}]},"options":{}},"id":"48c05793-78c5-49c9-b05b-9563e143ee8e","name":"DADOS BOTAO3","type":"n8n-nodes-base.set","typeVersion":3.3,"position":[0,3168]},{"parameters":{"jsCode":"// Obtém o texto da variável\nlet inputText = $json[\"msgrecebida\"];\nlet contato = $json[\"contato\"]; // Supondo que o contato esteja disponível no JSON\n\n// Expressão regular para verificar se o texto contém terminações de domínio\nconst isLink = /(https?:\\/\\/[^\\s]+|www\\.[^\\s]+|[^\\s]+\\.(com|com\\.br|bet|io))/i.test(inputText);\n\n// Retorna o resultado\nreturn {\n  json: {\n    isLink: isLink,\n    originalText: inputText,\n  }\n};\n"},"id":"69872838-0dfb-46d5-97e5-8919a9ee7f01","name":"Code","type":"n8n-nodes-base.code","typeVersion":2,"position":[-2240,1824]},{"parameters":{"assignments":{"assignments":[{"id":"c953c65b-60f0-4564-a686-7de49801e353","name":"data.urlapi","value":"https://whatsapi.typebot.pro","type":"string"},{"id":"461e2770-82e0-4af8-9fba-761fdf08a7d2","name":"data.instancia","value":"JAMILPESSOAL","type":"string"},{"id":"f1d06dba-5d8b-42dd-af60-75547ec05738","name":"data.globalapi","value":"c3ce71107fd5777e","type":"string"},{"id":"0de92c80-a4ad-46d2-98ad-e01536be0f67","name":"data.apikey","value":"AA06B6D074F3-4FFD-B029-95A106A1786A","type":"string"},{"id":"b9a7f52a-4adb-4e1b-a588-5161815f93c3","name":"data.acao","value":"={{ $json.body.data.message.conversation }}","type":"string"},{"id":"6fb2e3a5-6827-474a-b3a9-0f2ab28bec79","name":"grupo","value":"={{ $json.body.data.key.remoteJid }}","type":"string"},{"id":"e2094a84-60a4-4c23-bb3d-53a7f648a163","name":"contatomsg","value":"={{ $json.body.data.key.participant }}","type":"string"},{"id":"2855c45a-992f-456f-92b3-0614160c1639","name":"idmensagem","value":"={{ $json.body.data.key.id }}","type":"string"}]},"options":{}},"id":"7edff3f0-2072-4a94-bbf6-fe8a694b31f9","name":"DADOS1","type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-2640,1824]},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"914213de-7707-4b88-a06c-88e2f0da8900","leftValue":"={{ $json.result }}","rightValue":"","operator":{"type":"boolean","operation":"true","singleValue":true}}],"combinator":"and"},"options":{}},"id":"14352ff4-4342-4d4f-a43e-0bf9782f6b53","name":"If","type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-2016,1600]},{"parameters":{"jsCode":"// Obtém a lista de participantes do nó anterior (HTTP Request)\nlet participantsList = $json[\"participants\"]; // Use o caminho correto para acessar a lista\n\n// Filtra a lista para manter apenas os participantes com status 'admin' ou 'superadmin'\n// e mapeia para retornar apenas \"id\" e \"admin\"\nlet filteredAdmins = participantsList\n    .filter(participant => participant.admin === 'admin' || participant.admin === 'superadmin')\n    .map(participant => ({ id: participant.id, admin: participant.admin }));\n\n// Retorna a lista filtrada\nreturn {\n  json: {\n    adminsgrupo: filteredAdmins\n  }\n};"},"id":"dca8e2d2-97c3-4334-a389-521da2847fe9","name":"FILTRARADM","type":"n8n-nodes-base.code","typeVersion":2,"position":[-2416,1600]},{"parameters":{"url":"={{ $('DADOS1').item.json.data.urlapi }}/group/participants/{{ $('DADOS1').item.json.data.instancia }}?groupJid={{ $('DADOS1').item.json.grupo }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"={{ $('DADOS1').item.json.data.apikey }}"},{"name":"globalApikey","value":"={{ $('DADOS1').item.json.data.globalapi }}"}]},"options":{}},"id":"a3ff4a59-3e59-4887-a221-b8eb38069db5","name":"RECEBER MEMBROS DO GRUPO","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-2640,1616],"alwaysOutputData":false,"onError":"continueErrorOutput"},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"leftValue":"={{ $json.isLink }}","rightValue":"true","operator":{"type":"boolean","operation":"true","singleValue":true}}],"combinator":"and"},"renameOutput":true,"outputKey":"LINK ENCONTRADO"}]},"options":{}},"id":"ace5029a-13d8-4d7d-8f3b-597270276586","name":"Switch2","type":"n8n-nodes-base.switch","typeVersion":3.2,"position":[-2048,1824]},{"parameters":{"assignments":{"assignments":[{"id":"d06a490a-dde9-4e6e-8840-5e6e8fa3b80b","name":"msgrecebida","value":"={{ $('Webhook').item.json.body.data.message.conversation }}","type":"string"}]},"options":{}},"id":"46763319-52d7-4dec-bfde-4437b0f541c1","name":"MSGRECEBIDA","type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-2448,1824]},{"parameters":{"jsCode":"// Acessa o valor \"contatomsg\" do nó \"DADOS1\"\nlet contatomsg = $node[\"DADOS1\"].json.contatomsg;\n\n// Acessa a lista de administradores do nó \"FILTRA ADM\" e extrai \"adminsgrupo\"\nlet adminList = $node[\"FILTRARADM\"].json.adminsgrupo;\n\n// Extrai os IDs dos administradores em um array\nlet adminIds = Array.isArray(adminList) ? adminList.map(admin => admin.id) : [];\n\n// Verifica se \"contatomsg\" está na lista de IDs de administradores\nlet isContatoMsgInAdminList = adminIds.includes(contatomsg);\n\n// Retorna o resultado e o valor de \"contatomsg\" se estiver presente\nreturn {\n  json: {\n    result: isContatoMsgInAdminList,\n    contatomsg: contatomsg\n  }\n};\n"},"id":"926a6fcd-72eb-4066-aa18-50ff355d21e0","name":"Code1","type":"n8n-nodes-base.code","typeVersion":2,"position":[-2224,1600]},{"parameters":{"method":"DELETE","url":"=https://evolutionapi.typebot.pro/chat/deleteMessageForEveryone/BOSS","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"=cf9sa9srqfdia0rcupa4vo"},{"name":"globalApikey","value":"=LaaxXSXdg1O0HgOSIr63aznmp6kwwkSi1Gt7GYDNSr7r54NdrqixvVpTTPmWNDPMcmU2veJPtwvdUELlK1ZzcceT89IiZ2cABTk9mvZNp8vWPWQuIMWP3AjFgPrcqfYi"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"id\": \"{{ $('DADOS1').item.json.idmensagem }}\",\n  \"remoteJid\": \"{{ $('DADOS1').item.json.grupo }}\",\n  \"fromMe\": true,\n  \"paticipant\": \"{{ $('DADOS1').item.json.contatomsg }}\"\n}","options":{}},"id":"c9ddd93b-8fac-4a51-89ba-2329d458f49c","name":"HTTP Request1","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-1824,1664]},{"parameters":{"method":"POST","url":"={{ $('DADOS1').item.json.data.urlapi }}/message/sendText/{{ $('DADOS1').item.json.data.instancia }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"={{ $('DADOS1').item.json.data.apikey }}"},{"name":"globalApikey","value":"={{ $('DADOS1').item.json.data.apikey }}"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n    \"number\": \"{{ $('DADOS1').item.json.grupo }}\",\n    \"text\": \"Envio de link permitido\"\n}","options":{}},"id":"d43bf7d1-f47d-4ce8-a0db-fb3b2f1980bf","name":"LINK PERMITIDO","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-1808,1440],"alwaysOutputData":false},{"parameters":{"method":"POST","url":"={{ $('DADOS1').item.json.data.urlapi }}/message/sendText/{{ $('DADOS1').item.json.data.instancia }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"={{ $('DADOS1').item.json.data.apikey }}"},{"name":"globalApikey","value":"={{ $('DADOS1').item.json.data.apikey }}"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n    \"number\": \"{{ $('DADOS1').item.json.grupo }}\",\n    \"text\": \"Envio de link permitido apenas a administradores\"\n}","options":{}},"id":"bbcf2ff5-0cc8-4860-9599-fcc63928b3e7","name":"LINK PERMITIDO1","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-1616,1664],"alwaysOutputData":false},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"leftValue":"={{ $json.body.data.key.remoteJid }}","rightValue":"120363350108095525@g.us","operator":{"type":"string","operation":"equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"N8N TESTE"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"7843a24d-e539-44ba-8f98-dd52b3f2e513","leftValue":"={{ $json.body.data.key.remoteJid }}","rightValue":"120363127737464835@g.us","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"PAPO RETO MKT"}]},"options":{}},"id":"0357ca49-6bf6-4a8e-9c67-a7b931fc9f42","name":"Switch1","type":"n8n-nodes-base.switch","typeVersion":3.2,"position":[-2928,1824]},{"parameters":{"method":"DELETE","url":"={{ $('DADOS1').item.json.data.urlapi }}/chat/deleteMessageForEveryone/{{ $('DADOS1').item.json.data.instancia }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"={{ $('DADOS1').item.json.data.apikey }}"},{"name":"globalApikey","value":"={{ $('DADOS1').item.json.data.globalapi }}"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"id\": \"{{ $('DADOS1').item.json.idmensagem }}\",\n  \"remoteJid\": \"{{ $('DADOS1').item.json.grupo }}\",\n  \"fromMe\": true,\n  \"paticipant\": \"{{ $json.contatomsg }}\"\n}","options":{}},"id":"7ff242e5-9f9a-45a7-af5f-806fabb2ca82","name":"delete api20","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-1616,1872]},{"parameters":{"content":"# REMOVER LINKS DOS GRUPOS INFORMADOS","height":670.7292248874968,"width":1530.978919566921,"color":4},"id":"f8325ccd-61be-4816-8b89-58367d7007a5","name":"Sticky Note8","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-2960,1360]},{"parameters":{"content":"## COMANDO TELERA","height":233.15141572191064,"width":529.8209964749201},"id":"3052e37f-4f3c-4fd4-8feb-442b578c6c3f","name":"Sticky Note10","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-80,3360]},{"parameters":{"assignments":{"assignments":[{"id":"3df5be45-f7f7-4297-a1ad-0da61420e6a6","name":"botao.titulo","value":"TELERA - NUMEROS VIRTUAIS","type":"string"},{"id":"a8a466c4-6cd7-4b40-9071-aecadb9fe926","name":"botao.mensagem","value":"=📲💼 Garanta mais segurança para o seu negócio com o Número Virtual da Telera no WhatsApp Business! 💼📲\\n\\n🔒 Mantenha seu número pessoal confidencial e profissionalize o seu atendimento com essa solução prática e segura! 🔐\\n\\n Vantagens:\\n🖥️ Números diretamente na sua dashboard!\\n🔄 Solicite novos códigos em caso de queda do WhatsApp.\\n🌐 100% online: sem necessidade de chip físico!\\n\\n❓ Perguntas Frequentes:\\n\\n❓ Posso usar meu número no WhatsApp Business?\\n💬 Sim! Você configura o número para receber a chamada de autenticação e ativá-lo no seu aparelho.\\n\\n❓ O código de ativação do WhatsApp é recebido por mensagem?\\n📞 Não! O código chega por uma chamada telefônica, após o tempo solicitado pelo app.\\n\\n❓ E se meu número for banido?\\n⚠️ A Telera não se responsabiliza por números banidos. Para suporte, entre em contato com o próprio WhatsApp Business.\\n\\n Como Usar: https://youtu.be/orLJeKNOSXE?si=W0wsphms0ivnPi7W","type":"string"},{"id":"9b918f37-fe4b-4f0e-b0e6-74e50c1c408f","name":"botao.legenda","value":"ACESSAR TELERA","type":"string"},{"id":"ee8dc9bf-eedd-45e5-a2e9-2a554936c903","name":"botao.url","value":"https://app.telera.com.br/cadastro/?afiliado=235549","type":"string"}]},"options":{}},"id":"d862dfa1-b2c4-4a0d-a493-054acf059e72","name":"DADOS BOTAO8","type":"n8n-nodes-base.set","typeVersion":3.3,"position":[0,3424]},{"parameters":{"content":"## COMANDO TEAM ASGARD","height":233.15141572191064,"width":529.8209964749201},"id":"57330d36-9b33-478d-bc7c-0dd799af1359","name":"Sticky Note11","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-80,3632]},{"parameters":{"assignments":{"assignments":[{"id":"3df5be45-f7f7-4297-a1ad-0da61420e6a6","name":"botao.titulo","value":"TEAM ASGARD - BASE IGAMING","type":"string"},{"id":"a8a466c4-6cd7-4b40-9071-aecadb9fe926","name":"botao.mensagem","value":"=Venha para o *TEAM ASGARD*, Maior base da Donald, onde temos todo treinamento, funis, estratégias e o melhor grupo de network do Igaming nacional.\\n\\n✅ Casa na lista e em processo de regulamentação junto ao SIGAP\\n\\nN° do Pedido 046/2024\\nPedido: 19/08/2024\\nCNPJ: 37.456.039/0001-28\\nNome: GORILLAS GROUP DO BRASIL LTDA\\n\\n💰 Comissão REV de 80% (NGR)\\n💬 Sala de Sinais e App de Sinais\\n💼 Material publicitário\\n🔄 Saques semanais sem burocracia (mínimo de R$100)\\n🤝 Grupo de Networking e Mentorias Particulares\\n🎯 Premiação por metas alcançadas (Pulseira e Quadros)","type":"string"},{"id":"9b918f37-fe4b-4f0e-b0e6-74e50c1c408f","name":"botao.legenda","value":"ACESSAR TELERA","type":"string"},{"id":"ee8dc9bf-eedd-45e5-a2e9-2a554936c903","name":"botao.url","value":"CADASTRAR: https://www.teamasgard.pro/","type":"string"}]},"options":{}},"id":"f6a0967b-5b62-4377-90dc-df8c44705410","name":"DADOS BOTAO9","type":"n8n-nodes-base.set","typeVersion":3.3,"position":[0,3680]},{"parameters":{"content":"## START E DADOS\n**CONFIGURAR SEU WEBHOOK E DEFINIR A CONFIGURAÇÃO DE ADM","height":498,"width":1246,"color":4},"id":"4b1056c4-a54e-4e8e-8de7-14f9c6080d95","name":"Sticky Note9","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-2960,3264]},{"parameters":{"content":"## COMANDO NOTION","height":229.94285097800338,"width":529.8209964749201},"id":"80aa8320-ebd9-46fc-9898-a5319e050904","name":"Sticky Note12","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-80,3888]},{"parameters":{"assignments":{"assignments":[{"id":"3df5be45-f7f7-4297-a1ad-0da61420e6a6","name":"botao.titulo","value":"NOTION ASGARD ACADEMY","type":"string"},{"id":"a8a466c4-6cd7-4b40-9071-aecadb9fe926","name":"botao.mensagem","value":"=🌟 Mais de 1200 Prompts para usar no ChatGPT e transformar suas estratégias!\\n\\n💡 Entenda o ChatGPT\\n✉️ E-mail Marketing\\n📱 Redes Sociais\\n🎥 TikTok ou Instagram\\n📹 Marketing no YouTube\\n🎙️ Marketing e Podcast\\n🐦 Twitter\\n📈 Anúncios no Instagram (Meta)\\n🔍 SEO\\n💼 LinkedIn\\n\\n🔥 +350 Prompts específicos para te ajudar:\\n✍️ Copywriting\\n📓 Manual dos Negócios\\n💸 Funil Lucrativo\\n🤝 Marketing de Afiliados\\n📲 Marketing por SMS\\n🤖 Atendimento ao Cliente\\n🛒 Website e E-commerce","type":"string"},{"id":"9b918f37-fe4b-4f0e-b0e6-74e50c1c408f","name":"botao.legenda","value":"NOTION ASGARD ACADEMY","type":"string"},{"id":"ee8dc9bf-eedd-45e5-a2e9-2a554936c903","name":"botao.url","value":"Acessar: https://reflective-zucchini-911.notion.site/ASGARD-ACADEMY-GPT-MASTER-1120d2b8e749804f8365c444ed03bbcb","type":"string"}]},"options":{}},"id":"0f614dc5-84a0-47eb-8863-e7ac78df3ba2","name":"DADOS BOTAO10","type":"n8n-nodes-base.set","typeVersion":3.3,"position":[0,3968]},{"parameters":{"content":"## PODCAST PAPO RETO","height":233.15141572191064,"width":529.8209964749201},"id":"8d656d33-0cd7-45a5-bf0f-2ce3a8362634","name":"Sticky Note13","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-80,4144]},{"parameters":{"assignments":{"assignments":[{"id":"3df5be45-f7f7-4297-a1ad-0da61420e6a6","name":"botao.titulo","value":"PODCAST PAPO RETO","type":"string"},{"id":"a8a466c4-6cd7-4b40-9071-aecadb9fe926","name":"botao.mensagem","value":"=🎙✨ Fala, pessoal! ✨🎙\\n\\nQuero convidar todos vocês para conhecerem meu *podcast novo no YouTube! Lá vamos falar sobre *marketing, empreendedorismo, e muito mais. 💼📈\\n\\n🔊 E não é só isso! Também teremos *convidados especiais* para bater um papo sobre o que há de mais atual no mercado. 🎤🔥\\n\\nO canal é novo, mas prometo trazer *conteúdo de qualidade* pra vocês. Vem crescer com a gente! 🚀💡\\n\\n👉 Acesse o link e já se inscreve:","type":"string"},{"id":"ee8dc9bf-eedd-45e5-a2e9-2a554936c903","name":"botao.url","value":"https://youtube.com/@jamilabrao","type":"string"}]},"options":{}},"id":"c55822a7-1415-45a0-bd63-ea44460f2030","name":"DADOS BOTAO11","type":"n8n-nodes-base.set","typeVersion":3.3,"position":[0,4208]},{"parameters":{"jsCode":"// Para cada item no array, edite o campo \"participante\"\nreturn items.map(item => {\n  const participante = item.json.participante;\n  \n  // Remova tudo após o @\n  const cleanedParticipante = participante.split('@')[0];\n  \n  // Retorne o item com o valor atualizado\n  return {\n    json: {\n      ...item.json,\n      participante: cleanedParticipante\n    }\n  };\n});\n"},"id":"855161ab-0972-4635-8764-152a5b4d1f13","name":"REMOVER NUMERO","type":"n8n-nodes-base.code","typeVersion":2,"position":[-2080,3344]},{"parameters":{"assignments":{"assignments":[{"id":"7fa3b8aa-e310-4a57-9460-a05f635824fe","name":"participante","value":"={{ $json.body.data.key.participant }}","type":"string"},{"id":"d50f6a63-20ed-43e6-a1ca-881493f50a4a","name":"participante","value":"={{ $json.body.data.key.remoteJid }}","type":"string"}]},"options":{}},"id":"80b3015f-d58c-4fc7-9ed7-e02be064c006","name":"NUMERO ADM","type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-2304,3344]},{"parameters":{"content":"## CERTIFICADO IPHONE","height":249.0861510850578,"width":666.3720446680976},"id":"2d0a62cb-47c0-40cd-814b-869d8b7d206d","name":"Sticky Note14","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-80,4400]},{"parameters":{"assignments":{"assignments":[{"id":"3df5be45-f7f7-4297-a1ad-0da61420e6a6","name":"botao.titulo","value":"CERTIFICADO PARA IPHONE","type":"string"},{"id":"a8a466c4-6cd7-4b40-9071-aecadb9fe926","name":"botao.mensagem","value":"=🌟 Vantagens do Certificado para iPhone 🌟\\n\\n✅ Tenha vários WhatsApp, Facebook, Telegram e mais sem precisar de jailbreak 🎉\\n✅ Certificado com validade de 1 ano 📆\\n✅ Instalação simples com tutorial enviado após a compra 📄\\n✅ Suporte especializado e acesso a um grupo exclusivo com várias apps (.ipa) incríveis para instalar 🚀\\n\\n⚡ Aproveite a liberdade e praticidade no seu iPhone! 💻📱","type":"string"}]},"options":{}},"id":"96a967ac-9bbe-4c4f-8adc-fd7d6617572e","name":"DADOS BOTAO12","type":"n8n-nodes-base.set","typeVersion":3.3,"position":[0,4464]},{"parameters":{"method":"POST","url":"={{ $('DADOS').item.json.data.urlapi }}/message/sendContact/{{ $('DADOS').item.json.data.instancia }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"={{ $('DADOS').item.json.data.apikey }}"},{"name":"globalApikey","value":"={{ $('DADOS').item.json.data.globalapi }}"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n    \"number\": \"{{ $('COMANDOS-WHATS1').item.json.contato }}\",\n    \"options\": {\n        \"delay\": 1200,\n        \"presence\": \"composing\"\n    },\n    \"contact\": [\n        {\n            \"fullName\": \"ROCHA - CERTIFICADO IPHONE\",\n            \"wuid\": \"5511974426532\",\n            \"phoneNumber\": \"55 11 9 7442-6532\",\n            \"organization\": \"ROCHA - CERTIFICADOS IPHONE\"\n        }\n    ]\n}\n","options":{}},"id":"4d002f7e-be82-4115-ada7-982b15a29885","name":"ENVIO SEM BOTÃO12","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[384,4464],"alwaysOutputData":false},{"parameters":{"content":"## MENCIONAR TODOS","height":249.0861510850578,"width":666.3720446680976},"id":"65f7df2b-01f3-47c7-90cb-0c55cedffa07","name":"Sticky Note15","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-80,4688]},{"parameters":{"assignments":{"assignments":[{"id":"3df5be45-f7f7-4297-a1ad-0da61420e6a6","name":"botao.titulo","value":"CERTIFICADO PARA IPHONE","type":"string"},{"id":"a8a466c4-6cd7-4b40-9071-aecadb9fe926","name":"botao.mensagem","value":"=🌟 Vantagens do Certificado para iPhone 🌟\\n\\n✅ Tenha vários WhatsApp, Facebook, Telegram e mais sem precisar de jailbreak 🎉\\n✅ Certificado com validade de 1 ano 📆\\n✅ Instalação simples com tutorial enviado após a compra 📄\\n✅ Suporte especializado e acesso a um grupo exclusivo com várias apps (.ipa) incríveis para instalar 🚀\\n\\n⚡ Aproveite a liberdade e praticidade no seu iPhone! 💻📱","type":"string"}]},"options":{}},"id":"37c400c2-6f77-4b5c-963d-e9214d5f39a6","name":"DADOS BOTAO13","type":"n8n-nodes-base.set","typeVersion":3.3,"position":[0,4752]},{"parameters":{},"id":"f4d95c7b-eeff-4d69-ad4f-9530cecfbefb","name":"No Operation, do nothing","type":"n8n-nodes-base.noOp","typeVersion":1,"position":[-2304,3568]},{"parameters":{"content":"## Start / WEBHOOK","height":222,"width":277,"color":6},"id":"5e16273b-94d8-49ff-a3c5-219d57d77982","name":"Sticky Note17","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-3520,3184]},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"leftValue":"={{ $json.ordem }}","rightValue":"/remover","operator":{"type":"string","operation":"equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"REMOVER"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"a65c985b-3145-464a-b574-26d9604bd9cc","leftValue":"={{ $json.ordem }}","rightValue":"/adm","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"PROMOVER ADM"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"25533136-9052-4347-a369-a7e3c67ef954","leftValue":"={{ $json.ordem }}","rightValue":"/tiraradm","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"DESPROMOVER ADM"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"cd61c7a2-25d7-4f27-9eb5-a465f4cf1840","leftValue":"={{ $json.ordem }}","rightValue":"/fechar","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"FECHAR GRUPO"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"728f8ce8-f60f-4570-a0f1-90a22a94debe","leftValue":"={{ $json.ordem }}","rightValue":"/abrir","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"}}]},"options":{}},"id":"c6a7cc22-1e1f-4e7f-9e46-23e951c2d0ef","name":"Switch","type":"n8n-nodes-base.switch","typeVersion":3.2,"position":[-2880,4048]},{"parameters":{"method":"POST","url":"={{ $('DADOS').item.json.data.urlapi }}/message/sendText/{{ $('DADOS').item.json.data.instancia }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"={{ $('DADOS').item.json.data.apikey }}"},{"name":"globalApikey","value":"={{ $('DADOS').item.json.data.globalapi }}"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n    \"number\": \"{{ $('COMANDOS-WHATS1').item.json.contato }}\",\n    \"text\": \"✅ você foi Marcado acima MENSAGEM IMPORTANTE\",\n    \"delay\": 1200,\n    \"quoted\": {\n        \"key\": {\n            \"id\": \"{{ $('Webhook').item.json.body.data.key.id }}\"\n        },\n        \"message\": {\n            \"conversation\": \"LEIA COM ATENÇÃO O GRUPO.\"\n        }\n    },\n    \"linkPreview\": false,\n    \"mentionsEveryOne\": true\n}\n","options":{}},"id":"bb6ce242-4227-4bde-aa34-7aee655ddc98","name":"ENVIO SEM BOTÃO13","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[192,4752],"alwaysOutputData":false},{"parameters":{"method":"POST","url":"={{ $('DADOS').item.json.data.urlapi }}/message/sendText/{{ $('DADOS').item.json.data.instancia }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"={{ $('DADOS').item.json.data.apikey }}"},{"name":"globalApikey","value":"={{ $('DADOS').item.json.data.globalapi }}"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n    \"number\": \"{{ $('COMANDOS-WHATS1').item.json.contato }}\",\n    \"text\": \"*{{ $json.botao.titulo }}*\\n\\n{{ $json.botao.mensagem }}\\n\\n{{ $json.botao.url }}\"\n}","options":{}},"id":"bc5791c6-2ad3-473a-a905-10583146e5d1","name":"ENVIO SEM BOTÃO11","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[192,4464],"alwaysOutputData":false},{"parameters":{"method":"POST","url":"={{ $('DADOS').item.json.data.urlapi }}/message/sendText/{{ $('DADOS').item.json.data.instancia }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"={{ $('DADOS').item.json.data.apikey }}"},{"name":"globalApikey","value":"={{ $('DADOS').item.json.data.globalapi }}"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n    \"number\": \"{{ $('COMANDOS-WHATS1').item.json.contato }}\",\n    \"text\": \"*{{ $json.botao.titulo }}*\\n\\n{{ $json.botao.mensagem }}\\n\\n{{ $json.botao.url }}\"\n}","options":{}},"id":"3c472048-f228-4f54-8ed4-47465978517b","name":"ENVIO SEM BOTÃO10","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[224,4208],"alwaysOutputData":false},{"parameters":{"method":"POST","url":"={{ $('DADOS').item.json.data.urlapi }}/message/sendText/{{ $('DADOS').item.json.data.instancia }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"={{ $('DADOS').item.json.data.apikey }}"},{"name":"globalApikey","value":"={{ $('DADOS').item.json.data.globalapi }}"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n    \"number\": \"{{ $('COMANDOS-WHATS').item.json.contato }}\",\n    \"text\": \"*{{ $json.botao.titulo }}*\\n\\n{{ $json.botao.mensagem }}\\n\\n{{ $json.botao.url }}\"\n}","options":{}},"id":"aa0d7e12-aa6b-4220-849f-ed80ecc25214","name":"ENVIO SEM BOTÃO","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[224,1840],"alwaysOutputData":false},{"parameters":{"method":"POST","url":"={{ $('DADOS').item.json.data.urlapi }}/message/sendText/{{ $('DADOS').item.json.data.instancia }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"={{ $('DADOS').item.json.data.apikey }}"},{"name":"globalApikey","value":"={{ $('DADOS').item.json.data.globalapi }}"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n    \"number\": \"{{ $('COMANDOS-WHATS').item.json.contato }}\",\n    \"text\": \"*{{ $json.botao.titulo }}*\\n\\n{{ $json.botao.mensagem }}\\n\\n{{ $json.botao.url }}\"\n}","options":{}},"id":"7dbe772f-1541-43b0-831d-cafd4e5a3074","name":"ENVIO SEM BOTÃO1","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[224,2128],"alwaysOutputData":false},{"parameters":{"method":"POST","url":"={{ $('DADOS').item.json.data.urlapi }}/message/sendText/{{ $('DADOS').item.json.data.instancia }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"={{ $('DADOS').item.json.data.apikey }}"},{"name":"globalApikey","value":"={{ $('DADOS').item.json.data.globalapi }}"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n    \"number\": \"{{ $('COMANDOS-WHATS').item.json.contato }}\",\n    \"text\": \"*{{ $json.botao.titulo }}*\\n\\n{{ $json.botao.mensagem }}\\n\\n{{ $json.botao.url }}\"\n}","options":{}},"id":"f92bb638-8ebf-4d86-9023-04b2725218a2","name":"ENVIO SEM BOTÃO2","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[224,2384],"alwaysOutputData":false},{"parameters":{"method":"POST","url":"={{ $('DADOS').item.json.data.urlapi }}/message/sendText/{{ $('DADOS').item.json.data.instancia }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"={{ $('DADOS').item.json.data.apikey }}"},{"name":"globalApikey","value":"={{ $('DADOS').item.json.data.globalapi }}"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n    \"number\": \"{{ $('COMANDOS-WHATS').item.json.contato }}\",\n    \"text\": \"*{{ $json.botao.titulo }}*\\n\\n{{ $json.botao.mensagem }}\\n\\n{{ $json.botao.url }}\"\n}","options":{}},"id":"e2052261-9400-4c0c-90c6-1032d0e061db","name":"ENVIO SEM BOTÃO3","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[224,2640],"alwaysOutputData":false},{"parameters":{"method":"POST","url":"={{ $('DADOS').item.json.data.urlapi }}/message/sendText/{{ $('DADOS').item.json.data.instancia }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"={{ $('DADOS').item.json.data.apikey }}"},{"name":"globalApikey","value":"={{ $('DADOS').item.json.data.globalapi }}"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n    \"number\": \"{{ $('COMANDOS-WHATS').item.json.contato }}\",\n    \"text\": \"*{{ $json.botao.titulo }}*\\n\\n{{ $json.botao.mensagem }}\\n\\n{{ $json.botao.url }}\"\n}","options":{}},"id":"ea165803-a99f-4038-a275-d65efe7b0eb3","name":"ENVIO SEM BOTÃO5 - LASTLINK","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[224,2912],"alwaysOutputData":false},{"parameters":{"method":"POST","url":"={{ $('DADOS').item.json.data.urlapi }}/message/sendText/{{ $('DADOS').item.json.data.instancia }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"={{ $('DADOS').item.json.data.apikey }}"},{"name":"globalApikey","value":"={{ $('DADOS').item.json.data.globalapi }}"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n    \"number\": \"{{ $('COMANDOS-WHATS').item.json.contato }}\",\n    \"text\": \"*{{ $json.botao.titulo }}*\\n\\n{{ $json.botao.mensagem }}\\n\\n{{ $json.botao.url }}\"\n}","options":{}},"id":"2ed49c01-1a29-45f3-80aa-242bc42daf6f","name":"ENVIO SEM BOTÃO6","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[224,3168],"alwaysOutputData":false},{"parameters":{"method":"POST","url":"={{ $('DADOS').item.json.data.urlapi }}/message/sendText/{{ $('DADOS').item.json.data.instancia }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"={{ $('DADOS').item.json.data.apikey }}"},{"name":"globalApikey","value":"={{ $('DADOS').item.json.data.globalapi }}"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n    \"number\": \"{{ $('COMANDOS-WHATS').item.json.contato }}\",\n    \"text\": \"*{{ $json.botao.titulo }}*\\n\\n{{ $json.botao.mensagem }}\\n\\n{{ $json.botao.url }}\"\n}","options":{}},"id":"705a0bf1-0ddb-4855-a942-0d0525fc16e8","name":"ENVIO SEM BOTÃO7","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[224,3424],"alwaysOutputData":false},{"parameters":{"method":"POST","url":"={{ $('DADOS').item.json.data.urlapi }}/message/sendText/{{ $('DADOS').item.json.data.instancia }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"={{ $('DADOS').item.json.data.apikey }}"},{"name":"globalApikey","value":"={{ $('DADOS').item.json.data.globalapi }}"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n    \"number\": \"{{ $('COMANDOS-WHATS').item.json.contato }}\",\n    \"text\": \"*{{ $json.botao.titulo }}*\\n\\n{{ $json.botao.mensagem }}\\n\\n{{ $json.botao.url }}\"\n}","options":{}},"id":"12de3005-8040-4230-84ab-7a4679a96dae","name":"ENVIO SEM BOTÃO8","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[224,3680],"alwaysOutputData":false},{"parameters":{"method":"POST","url":"={{ $('DADOS').item.json.data.urlapi }}/message/sendText/{{ $('DADOS').item.json.data.instancia }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"={{ $('DADOS').item.json.data.apikey }}"},{"name":"globalApikey","value":"={{ $('DADOS').item.json.data.globalapi }}"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n    \"number\": \"{{ $('COMANDOS-WHATS').item.json.contato }}\",\n    \"text\": \"*{{ $json.botao.titulo }}*\\n\\n{{ $json.botao.mensagem }}\\n\\n{{ $json.botao.url }}\"\n}","options":{}},"id":"002fbe87-ab0c-487f-bd05-f295bebecfc0","name":"ENVIO SEM BOTÃO9","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[224,3968],"alwaysOutputData":false},{"parameters":{"jsCode":"// Obtenha os dados da variável diretamente\nconst data = $('Pegando mensagens do grupo').item.json.messages.records || [];\n\n// Obtenha a data de hoje em formato UTC (sem horário)\nconst today = new Date();\ntoday.setHours(0, 0, 0, 0);\n\n// Filtrar mensagens cuja data seja igual à de hoje\nconst filteredMessages = data.filter(record => {\n    const messageDate = new Date(record.messageTimestamp * 1000); // Convertendo timestamp para milissegundos\n    messageDate.setHours(0, 0, 0, 0); // Removendo a hora para comparar só o dia\n\n    return messageDate.getTime() === today.getTime();\n});\n\n// Contabilizar as mensagens por participante\nconst participantCount = {};\n\n// Contagem das mensagens por participante\nfilteredMessages.forEach(record => {\n    let participant = record.key?.participant; // Verifique se a chave existe\n    const pushName = record.pushName || \"Nome não identificado\"; // Captura o pushName\n\n    if (participant) {\n        // Remove o sufixo @s.whatsapp.net\n        participant = participant.replace('@s.whatsapp.net', '');\n\n        if (!participantCount[participant]) {\n            participantCount[participant] = {\n                count: 0,\n                pushName: pushName // Armazena o pushName\n            };\n        }\n        participantCount[participant].count++;\n    }\n});\n\n// Ordenar participantes pela quantidade de mensagens (do maior para o menor)\nconst sortedParticipants = Object.entries(participantCount)\n    .sort((a, b) => b[1].count - a[1].count) // Ordena pela quantidade de mensagens\n    .slice(0, 3); // Pega os 3 primeiros\n\n// Gerar a mensagem única com os três melhores participantes\nconst message = sortedParticipants.map((participant, index) => {\n    const medal = [\"🥇\", \"🥈\", \"🥉\"][index]; // Seleciona o emoji da medalha com base no índice\n    const pushName = `*${participant[1].pushName}*`; // Adiciona asteriscos ao pushName\n    const count = participant[1].count; // Pega a contagem de mensagens\n    return `${medal} ${pushName}\\n> Com ${count} mensagens`;\n}).join('\\n\\n'); // Junta as mensagens com quebras de linha\n\n// Retornar a mensagem única como resultado\nreturn [\n    {\n        json: {\n            mensagem: message\n        }\n    }\n];"},"id":"b591ed1b-ed38-452a-bdef-7514084300a6","name":"Top 3 membros","type":"n8n-nodes-base.code","typeVersion":2,"position":[-1264,4352]},{"parameters":{"jsCode":"// Obtenha os dados do nó anterior\nconst data = $('Pegando mensagens do grupo').item.json.messages.records || [];\n\n// Obtenha a data de hoje em formato UTC (sem horário)\nconst today = new Date();\ntoday.setHours(0, 0, 0, 0);\n\n// Filtrar mensagens cuja data seja igual à de hoje, cujo tipo seja \"conversation\" \n// e que não estejam marcadas como DELETED\nconst filteredMessages = data.filter(record => {\n    const messageDate = new Date(record.messageTimestamp * 1000); // Convertendo timestamp para milissegundos\n    messageDate.setHours(0, 0, 0, 0); // Removendo a hora para comparar só o dia\n\n    // Verificar se a mensagem foi deletada\n    const isDeleted = record.MessageUpdate && record.MessageUpdate.some(update => update.status === \"DELETED\");\n\n    // Adicionar logs para depuração\n    console.log(`Mensagem: ${record.message ? record.message.conversation : 'N/A'}`);\n    console.log(`Data da Mensagem: ${messageDate}`);\n    console.log(`É Deletada: ${isDeleted}`);\n    \n    return (\n        messageDate.getTime() === today.getTime() &&\n        record.messageType === \"conversation\" &&\n        !isDeleted // Ignorar mensagens deletadas\n    );\n});\n\n// Ordenar as mensagens pela data de forma crescente (mais antiga para mais nova)\nfilteredMessages.sort((a, b) => a.messageTimestamp - b.messageTimestamp);\n\n// Retornar apenas os campos necessários, ajustando o formato conforme solicitado\nconst result = filteredMessages.map(record => {\n    const telefoneMembro = record.key.participant ? record.key.participant.replace('@s.whatsapp.net', '') : 'Número não disponível';\n    const response = {\n        json: {\n            \"Membro\": record.pushName || \"Nome não identificado\", // Utilizar o pushName\n            \"Telefone do Membro\": telefoneMembro, // Telefone sem o sufixo\n            \"Mensagem\": record.message.conversation || null, // Mensagem de conversa\n        }\n    };\n\n    // Se existir contextInfo, adicionar o participant do contextInfo também\n    if (record.contextInfo && record.contextInfo.participant) {\n        response.json['Resposta para'] = record.contextInfo.participant;\n    }\n\n    return response;\n});\n\n// Retorne o resultado\nconsole.log(\"Mensagens Filtradas:\", result);\nreturn result;"},"id":"3d0fd4a5-967c-40ca-9e26-5beafb12c1ac","name":"Separa as mensagens de hoje","type":"n8n-nodes-base.code","typeVersion":2,"position":[-1088,4144]},{"parameters":{"method":"POST","url":"={{ $('Credenciais').item.json.baseUrl }}/chat/findMessages/{{ $('Credenciais').item.json.instance }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"={{ $('Credenciais').item.json.apikey }}"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n    \"where\": {\n        \"key\": {\n            \"remoteJid\": \"{{ $('Grupos').item.json.groupJids }}\"\n        }\n    },\n    \"page\": 1,\n    \"offset\": {{ $('Credenciais').item.json.offset }}\n}","options":{}},"id":"9c059803-4a58-4ea0-992a-a75f37be67a5","name":"Pegando mensagens do grupo","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-1264,4144]},{"parameters":{"aggregate":"aggregateAllItemData","destinationFieldName":"=Mensagens do grupo","options":{}},"id":"fa7e13ce-d224-4564-99a1-b8cc81c80d44","name":"Juntando Mensagens","type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[-880,4144]},{"parameters":{"assignments":{"assignments":[{"id":"1ed68fd6-9020-4eeb-8e17-78417291cf4c","name":"remoteJid (grupo)","value":"={{ $json.groupJids || $json.id}}","type":"string"}]},"options":{}},"id":"4f52a680-0873-4565-ad16-7bd889ffce6c","name":"Tratando dados do loop","type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-880,3952]},{"parameters":{"assignments":{"assignments":[{"id":"361f2ed1-b2c8-44fd-926c-5a8d9d7387d4","name":"baseUrl","value":"https://whatsapi.typebot.pro","type":"string"},{"id":"9df17754-2e22-411f-adfc-6d9d5fd2adb2","name":"instance","value":"={{ $('Webhook').item.json.body.instance }}","type":"string"},{"id":"d8298933-545f-4fd7-a56c-a70fafa1c315","name":"apikey","value":"b4d71f9c38e3ac12a6b08e4b6d53aa90","type":"string"},{"id":"3aceebf0-a0f3-4bd3-be1a-80ec53707e2f","name":"offset","value":"1000","type":"string"},{"id":"14513d04-dd61-4136-a268-792726f58b80","name":"grupo","value":"={{ $('Webhook').item.json.body.data.key.remoteJid }}","type":"string"}]},"options":{}},"id":"108cf147-7441-4484-821a-e1affbd98e87","name":"Credenciais","type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-1264,3952]},{"parameters":{},"id":"697c263b-5e28-4df1-847a-8bbc5dc24635","name":"FIM","type":"n8n-nodes-base.noOp","typeVersion":1,"position":[-880,4352]},{"parameters":{"jsCode":"// Obtém a informação 'grupo' do nó anterior chamado 'Credenciais'\nlet grupo = $node[\"Credenciais\"].json[\"grupo\"];\n\n// Substitui o placeholder <grupo_aqui> com o valor obtido\nconst groupJids = [\n    grupo\n];\n\n// Gerando a lista com o formato desejado\nconst result = groupJids.map(id => `${id}`);\n\n// Criando a estrutura de saída no formato correto para o n8n\nreturn result.map(item => {\n    return {\n        json: {\n            groupJids: item\n        }\n    };\n});\n"},"id":"07765445-f731-4f17-96fa-667055a76443","name":"Grupos","type":"n8n-nodes-base.code","typeVersion":2,"position":[-1056,3952]},{"parameters":{"method":"POST","url":"={{ $('Credenciais').item.json.baseUrl }}/message/sendText/{{ $('Credenciais').item.json.instance }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"={{ $('Credenciais').item.json.apikey }}"}]},"sendBody":true,"bodyParameters":{"parameters":[{"name":"number","value":"={{ $('Tratando dados do loop').item.json['remoteJid (grupo)'] }}"},{"name":"text","value":"=🏆 *Top 3 membros mais ativos hoje*:\n\n{{ $('Top 3 membros').item.json.mensagem }}"}]},"options":{}},"id":"8388b13f-6fc8-40aa-939e-9cbdc94f035d","name":"Enviando mensagem 1","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-1088,4352],"retryOnFail":true,"waitBetweenTries":2500},{"parameters":{"content":"## RANK","height":714.1125879569888,"width":662.0513567561713,"color":4},"id":"ac3dc59f-a924-452d-afa9-bc867a42a0a5","name":"Sticky Note18","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-1344,3872]},{"parameters":{"jsCode":"// Obtenha os dados da variável diretamente\nconst data = $('Pegando mensagens do grupo1').item.json.messages.records || [];\n\n// Obtenha a data de hoje em formato UTC (sem horário)\nconst today = new Date();\ntoday.setHours(0, 0, 0, 0);\n\n// Filtrar mensagens cuja data seja igual à de hoje\nconst filteredMessages = data.filter(record => {\n    const messageDate = new Date(record.messageTimestamp * 1000); // Convertendo timestamp para milissegundos\n    messageDate.setHours(0, 0, 0, 0); // Removendo a hora para comparar só o dia\n\n    return messageDate.getTime() === today.getTime();\n});\n\n// Calcular o total de mensagens de hoje\nconst totalMessages = filteredMessages.length;\n\n// Retornar o total de mensagens\nreturn [\n    {\n        json: {\n            totalMensagens: totalMessages\n        }\n    }\n];\n"},"id":"0651e2ad-20c9-4f1e-acb5-f26c1622420c","name":"Total de mensagens","type":"n8n-nodes-base.code","typeVersion":2,"position":[-1024,2288]},{"parameters":{"jsCode":"// Criação do array de mensagens\nconst messages = [\n  `Hoje, o dia foi agitado com *${items[0].json['totalMensagens']} mensagens* enviadas! 💬`,\n  `Uau! Já trocamos *${items[0].json['totalMensagens']} mensagens* hoje! 🔥`,\n  `Que dia cheio! *${items[0].json['totalMensagens']} mensagens* passaram por aqui! 🚀`,\n  `Hoje tivemos *${items[0].json['totalMensagens']} mensagens* trocadas, o que não é pouca coisa! 🎉`,\n  `O dia de hoje foi super produtivo com *${items[0].json['totalMensagens']} mensagens* enviadas! 💥`,\n  `Com *${items[0].json['totalMensagens']} mensagens* trocadas, o dia foi um sucesso! 🙌`,\n  `Hoje conseguimos trocar *${items[0].json['totalMensagens']} mensagens* – que movimentação! ⚡`,\n  `Um dia agitado com *${items[0].json['totalMensagens']} mensagens* enviadas! 💌`,\n  `Que energia! Já foram *${items[0].json['totalMensagens']} mensagens* enviadas hoje! 🔝`,\n  `O dia foi movimentado com *${items[0].json['totalMensagens']} mensagens* trocadas! Vamos para o próximo! 💪`,\n  `Eita que hoje tivemos *${items[0].json['totalMensagens']} mensagens* no nosso grupo`\n];\n\n// Sorteio aleatório\nconst randomMessage = messages[Math.floor(Math.random() * messages.length)];\n\n// Retornar o resultado para o n8n\nreturn [{ json: { randomMessage } }];\n"},"id":"8a64000b-fc4b-4af7-9ccf-e5c33fbdbaf1","name":"Mensagem de Total de mensagens","type":"n8n-nodes-base.code","typeVersion":2,"position":[-800,2288]},{"parameters":{"method":"POST","url":"={{ $('Credenciais1').item.json.baseUrl }}/message/sendText/{{ $('Credenciais1').item.json.instance }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"={{ $('Credenciais1').item.json.apikey }}"}]},"sendBody":true,"bodyParameters":{"parameters":[{"name":"number","value":"={{ $('Tratando dados do loop1').item.json['remoteJid (grupo)'] }}"},{"name":"text","value":"={{ $('Gera resumo').item.json.message.content.replace(/\\*\\*/g, '*') }}\n"}]},"options":{}},"id":"9c3a3a1b-a19c-4cf7-b833-d2e041039a7a","name":"Enviando mensagem 2","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-1216,2480]},{"parameters":{"options":{}},"id":"5df766d7-daf3-49ae-92c1-6a742a140f8c","name":"Loop Over Items","type":"n8n-nodes-base.splitInBatches","typeVersion":3,"position":[-2224,2192]},{"parameters":{"rule":{"interval":[{"triggerAtHour":22}]}},"id":"5ac75690-c9cb-4570-85c9-2d5b4512ad0d","name":"Iniciar todas 22h","type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.2,"position":[-2896,2224],"disabled":true},{"parameters":{"amount":2},"id":"333c6ed8-13bd-489d-b3e5-b0aa0f1ba72d","name":"Espera 2 segundos","type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[-1424,2480],"webhookId":"9f66f1f7-6b99-4e06-a657-a5d038d5fb9f"},{"parameters":{"amount":30},"id":"d91c2d3c-b86e-452f-933a-fc18684dd222","name":"Espera 30 segundos","type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[-976,2480],"webhookId":"9f66f1f7-6b99-4e06-a657-a5d038d5fb9f"},{"parameters":{"jsCode":"// Obtenha os dados da variável diretamente\nconst data = $('Pegando mensagens do grupo1').item.json.messages.records || [];\n\n// Obtenha a data de hoje em formato UTC (sem horário)\nconst today = new Date();\ntoday.setHours(0, 0, 0, 0);\n\n// Filtrar mensagens cuja data seja igual à de hoje\nconst filteredMessages = data.filter(record => {\n    const messageDate = new Date(record.messageTimestamp * 1000); // Convertendo timestamp para milissegundos\n    messageDate.setHours(0, 0, 0, 0); // Removendo a hora para comparar só o dia\n\n    return messageDate.getTime() === today.getTime();\n});\n\n// Contabilizar as mensagens por participante\nconst participantCount = {};\n\n// Contagem das mensagens por participante\nfilteredMessages.forEach(record => {\n    let participant = record.key?.participant; // Verifique se a chave existe\n    const pushName = record.pushName || \"Nome não identificado\"; // Captura o pushName\n\n    if (participant) {\n        // Remove o sufixo @s.whatsapp.net\n        participant = participant.replace('@s.whatsapp.net', '');\n\n        if (!participantCount[participant]) {\n            participantCount[participant] = {\n                count: 0,\n                pushName: pushName // Armazena o pushName\n            };\n        }\n        participantCount[participant].count++;\n    }\n});\n\n// Ordenar participantes pela quantidade de mensagens (do maior para o menor)\nconst sortedParticipants = Object.entries(participantCount)\n    .sort((a, b) => b[1].count - a[1].count) // Ordena pela quantidade de mensagens\n    .slice(0, 3); // Pega os 3 primeiros\n\n// Gerar a mensagem única com os três melhores participantes\nconst message = sortedParticipants.map((participant, index) => {\n    const medal = [\"🥇\", \"🥈\", \"🥉\"][index]; // Seleciona o emoji da medalha com base no índice\n    const pushName = `*${participant[1].pushName}*`; // Adiciona asteriscos ao pushName\n    const count = participant[1].count; // Pega a contagem de mensagens\n    return `${medal} ${pushName}\\n> Com ${count} mensagens`;\n}).join('\\n\\n'); // Junta as mensagens com quebras de linha\n\n// Retornar a mensagem única como resultado\nreturn [\n    {\n        json: {\n            mensagem: message\n        }\n    }\n];"},"id":"f6105b20-7918-41f1-8bdf-adae98075c83","name":"Top 3 membros1","type":"n8n-nodes-base.code","typeVersion":2,"position":[-1216,2288]},{"parameters":{"jsCode":"// Obtenha os dados do nó anterior\nconst data = $('Pegando mensagens do grupo1').item.json.messages.records || [];\n\n// Obtenha a data de hoje em formato UTC (sem horário)\nconst today = new Date();\ntoday.setHours(0, 0, 0, 0);\n\n// Filtrar mensagens cuja data seja igual à de hoje, cujo tipo seja \"conversation\" \n// e que não estejam marcadas como DELETED\nconst filteredMessages = data.filter(record => {\n    const messageDate = new Date(record.messageTimestamp * 1000); // Convertendo timestamp para milissegundos\n    messageDate.setHours(0, 0, 0, 0); // Removendo a hora para comparar só o dia\n\n    // Verificar se a mensagem foi deletada\n    const isDeleted = record.MessageUpdate && record.MessageUpdate.some(update => update.status === \"DELETED\");\n\n    // Adicionar logs para depuração\n    console.log(`Mensagem: ${record.message ? record.message.conversation : 'N/A'}`);\n    console.log(`Data da Mensagem: ${messageDate}`);\n    console.log(`É Deletada: ${isDeleted}`);\n    \n    return (\n        messageDate.getTime() === today.getTime() &&\n        record.messageType === \"conversation\" &&\n        !isDeleted // Ignorar mensagens deletadas\n    );\n});\n\n// Ordenar as mensagens pela data de forma crescente (mais antiga para mais nova)\nfilteredMessages.sort((a, b) => a.messageTimestamp - b.messageTimestamp);\n\n// Retornar apenas os campos necessários, ajustando o formato conforme solicitado\nconst result = filteredMessages.map(record => {\n    const telefoneMembro = record.key.participant ? record.key.participant.replace('@s.whatsapp.net', '') : 'Número não disponível';\n    const response = {\n        json: {\n            \"Membro\": record.pushName || \"Nome não identificado\", // Utilizar o pushName\n            \"Telefone do Membro\": telefoneMembro, // Telefone sem o sufixo\n            \"Mensagem\": record.message.conversation || null, // Mensagem de conversa\n        }\n    };\n\n    // Se existir contextInfo, adicionar o participant do contextInfo também\n    if (record.contextInfo && record.contextInfo.participant) {\n        response.json['Resposta para'] = record.contextInfo.participant;\n    }\n\n    return response;\n});\n\n// Retorne o resultado\nconsole.log(\"Mensagens Filtradas:\", result);\nreturn result;"},"id":"cd22d070-ecfb-4902-9019-d74d5319af85","name":"Separa as mensagens de hoje1","type":"n8n-nodes-base.code","typeVersion":2,"position":[-1616,2288],"retryOnFail":true},{"parameters":{"method":"POST","url":"={{ $('Credenciais1').item.json.baseUrl }}/chat/findMessages/{{ $('Credenciais1').item.json.instance }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"={{ $('Credenciais1').item.json.apikey }}"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n    \"where\": {\n        \"key\": {\n            \"remoteJid\": \"{{ $json['remoteJid (grupo)'] }}\"\n        }\n    },\n    \"page\": 1,\n    \"offset\": {{ $('Credenciais1').item.json.offset }}\n}","options":{}},"id":"1ac8780d-a5cd-42ae-9b93-73bd23539360","name":"Pegando mensagens do grupo1","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-1824,2288]},{"parameters":{"aggregate":"aggregateAllItemData","destinationFieldName":"=Mensagens do grupo","options":{}},"id":"10dfe6ce-9dbc-4b2a-9d83-c058244afe19","name":"Juntando Mensagens1","type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[-1424,2288]},{"parameters":{"assignments":{"assignments":[{"id":"1ed68fd6-9020-4eeb-8e17-78417291cf4c","name":"remoteJid (grupo)","value":"={{ $json.JID_GRUPO }}","type":"string"}]},"options":{}},"id":"dabf5cfc-4ff2-4d57-b112-79a65a034fcf","name":"Tratando dados do loop1","type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-2016,2288]},{"parameters":{"method":"POST","url":"={{ $('Credenciais1').item.json.baseUrl }}/message/sendText/{{ $('Credenciais1').item.json.instance }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"={{ $('Credenciais1').item.json.apikey }}"}]},"sendBody":true,"bodyParameters":{"parameters":[{"name":"number","value":"={{ $('Tratando dados do loop1').item.json['remoteJid (grupo)'] }}"},{"name":"text","value":"=💬 *Resumo do dia no Grupo*\n{{ $('Mensagem de Total de mensagens').item.json.randomMessage }}\n\n🏆 *Top 3 membros mais ativos hoje*:\n\n{{ $('Top 3 membros1').item.json.mensagem }}"}]},"options":{}},"id":"33ef5d1c-5fa8-4ec1-88ea-9d1bb9fd75ae","name":"Enviando mensagem ","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-1616,2480],"retryOnFail":true,"waitBetweenTries":2500},{"parameters":{"assignments":{"assignments":[{"id":"361f2ed1-b2c8-44fd-926c-5a8d9d7387d4","name":"baseUrl","value":"https://whatsapi.typebot.pro","type":"string"},{"id":"9df17754-2e22-411f-adfc-6d9d5fd2adb2","name":"instance","value":"JAMILPESSOAL","type":"string"},{"id":"d8298933-545f-4fd7-a56c-a70fafa1c315","name":"apikey","value":"57ec53c5bd97b369472d545052e77007","type":"string"},{"id":"3aceebf0-a0f3-4bd3-be1a-80ec53707e2f","name":"offset","value":"1000","type":"string"}]},"options":{}},"id":"0c390ed8-2d45-42fa-a08b-2980326c7573","name":"Credenciais1","type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-2720,2224]},{"parameters":{},"id":"efa59f51-3ed8-4eb9-a40e-6049bac0eabd","name":"FIM1","type":"n8n-nodes-base.noOp","typeVersion":1,"position":[-2016,2144]},{"parameters":{"content":"# Resumo de grupos automático","height":707.4646295306477,"width":2375.5655492043707,"color":7},"id":"6cca487b-e081-4d78-b47d-10aababeb9bd","name":"Sticky Note20","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-2960,2064]},{"parameters":{"content":"## Altere aqui - PERIODO / CREDENCIAIS / SHEET","height":251.9159908779343,"width":626.8911593937048,"color":3},"id":"d677165d-aee5-4095-9104-2106f1a0092d","name":"Sticky Note22","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-2944,2144]},{"parameters":{"operation":"appendOrUpdate","documentId":{"__rl":true,"value":"1B0g8SEAH1y0AsW0lcF2G28qZBLRkFNsfct-pB1YsZSc","mode":"list","cachedResultName":"Mensagem papo reto","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1B0g8SEAH1y0AsW0lcF2G28qZBLRkFNsfct-pB1YsZSc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":2104440596,"mode":"list","cachedResultName":"PARAMETROS","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1B0g8SEAH1y0AsW0lcF2G28qZBLRkFNsfct-pB1YsZSc/edit#gid=2104440596"},"columns":{"mappingMode":"defineBelow","value":{"JID_GRUPO":"={{ $json.remotejid }}","NOME":"={{ $json.nomegrupo }}","STATUS":"✅ RESUMO LIGADO"},"matchingColumns":["JID_GRUPO"],"schema":[{"id":"JID_GRUPO","displayName":"JID_GRUPO","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"NOME","displayName":"NOME","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"STATUS","displayName":"STATUS","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}]},"options":{}},"id":"4bbf39a8-bd60-46d8-aa94-0db86f21ecf8","name":"Google Sheets","type":"n8n-nodes-base.googleSheets","typeVersion":4.5,"position":[-2240,2864],"credentials":{"googleSheetsOAuth2Api":{"id":"c1hmUtfYiP5FWVBk","name":"GOOGLE JAMIL"}}},{"parameters":{"assignments":{"assignments":[{"id":"7fa3b8aa-e310-4a57-9460-a05f635824fe","name":"remotejid","value":"={{ $json.id }}","type":"string"},{"id":"b3e6fcf9-559f-4ee7-8181-9f523831f6ec","name":"nomegrupo","value":"={{ $json.subject }}","type":"string"}]},"options":{}},"id":"b6a6dea4-15e9-476e-a5e3-6b2dda765b4c","name":"NUMERO ADM1","type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-2704,2912]},{"parameters":{"operation":"appendOrUpdate","documentId":{"__rl":true,"value":"1B0g8SEAH1y0AsW0lcF2G28qZBLRkFNsfct-pB1YsZSc","mode":"list","cachedResultName":"Mensagem papo reto","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1B0g8SEAH1y0AsW0lcF2G28qZBLRkFNsfct-pB1YsZSc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":2104440596,"mode":"list","cachedResultName":"PARAMETROS","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1B0g8SEAH1y0AsW0lcF2G28qZBLRkFNsfct-pB1YsZSc/edit#gid=2104440596"},"columns":{"mappingMode":"defineBelow","value":{"JID_GRUPO":"={{ $json.remotejid }}","NOME":"={{ $json.nomegrupo }}","STATUS":"❌ RESUMO DESLIGADO"},"matchingColumns":["JID_GRUPO"],"schema":[{"id":"JID_GRUPO","displayName":"JID_GRUPO","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"NOME","displayName":"NOME","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"STATUS","displayName":"STATUS","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}]},"options":{}},"id":"754852b7-1b1f-48a1-835c-afbcde19ce10","name":"Google Sheets1","type":"n8n-nodes-base.googleSheets","typeVersion":4.5,"position":[-2240,3072],"credentials":{"googleSheetsOAuth2Api":{"id":"c1hmUtfYiP5FWVBk","name":"GOOGLE JAMIL"}}},{"parameters":{},"id":"82aaca55-8340-4b46-9d70-b56dd80eb859","name":"FIM2","type":"n8n-nodes-base.noOp","typeVersion":1,"position":[-1888,3088]},{"parameters":{"content":"## LIGAR/DESLIGAR RESUMO\n** LIGA E DESLIGA RESUMO NO GRUPO","height":450.89995360306943,"width":1249.5176039955952,"color":7},"id":"228a1b91-1fc9-414a-b4f0-69ea445f4830","name":"Sticky Note23","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-2960,2800]},{"parameters":{"documentId":{"__rl":true,"value":"1B0g8SEAH1y0AsW0lcF2G28qZBLRkFNsfct-pB1YsZSc","mode":"list","cachedResultName":"Mensagem papo reto","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1B0g8SEAH1y0AsW0lcF2G28qZBLRkFNsfct-pB1YsZSc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":2104440596,"mode":"list","cachedResultName":"PARAMETROS","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1B0g8SEAH1y0AsW0lcF2G28qZBLRkFNsfct-pB1YsZSc/edit#gid=2104440596"},"filtersUI":{"values":[{"lookupColumn":"STATUS","lookupValue":"✅ RESUMO LIGADO"}]},"options":{}},"id":"1103a388-a1be-4964-9e4d-a8386a8b5ffe","name":"Google Sheets2","type":"n8n-nodes-base.googleSheets","typeVersion":4.5,"position":[-2496,2224],"credentials":{"googleSheetsOAuth2Api":{"id":"c1hmUtfYiP5FWVBk","name":"GOOGLE JAMIL"}}},{"parameters":{"method":"POST","url":"={{ $('Webhook').item.json.body.server_url }}/message/sendText/{{ $('Webhook').item.json.body.instance }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"=57ec53c5bd97b369472d545052e77007"},{"name":"globalApikey","value":"=57ec53c5bd97b369472d545052e77007"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n    \"number\": \"{{ $json.JID_GRUPO }}\",\n    \"text\": \"GRUPO: {{ $json.NOME }}\\nSTATUS: {{ $json.STATUS }}\"\n}","options":{}},"id":"29888a02-9571-4d43-88f6-a4d0e3d0ee70","name":"ENVIO SEM BOTÃO16","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-2048,2960],"alwaysOutputData":false},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"leftValue":"={{ $('Webhook').item.json.body.data.message.conversation }}","rightValue":"/resumoon","operator":{"type":"string","operation":"equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"LIGAR RESUMO"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"e79cb8ee-03bf-4bad-9129-cdf5e44a424c","leftValue":"={{ $('Webhook').item.json.body.data.message.conversation }}","rightValue":"/resumooff","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"DESLIGAR RESUMO"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"95f34aa7-a5a8-4873-ab39-db431ec35ce4","leftValue":"={{ $('Webhook').item.json.body.data.message.conversation }}","rightValue":"","operator":{"type":"string","operation":"notEquals"}}],"combinator":"and"}}]},"options":{}},"id":"264f0a98-e1a4-4f03-a0b9-703c16d72191","name":"COMANDOS-WHATS2","type":"n8n-nodes-base.switch","typeVersion":3.2,"position":[-2528,2992]},{"parameters":{"jsCode":"// Obtenha os dados da variável diretamente\nconst data = $('Pegando mensagens do grupo2').item.json.messages.records || [];\n\n// Obtenha a data de hoje em formato UTC (sem horário)\nconst today = new Date();\ntoday.setHours(0, 0, 0, 0);\n\n// Filtrar mensagens cuja data seja igual à de hoje\nconst filteredMessages = data.filter(record => {\n    const messageDate = new Date(record.messageTimestamp * 1000); // Convertendo timestamp para milissegundos\n    messageDate.setHours(0, 0, 0, 0); // Removendo a hora para comparar só o dia\n\n    return messageDate.getTime() === today.getTime();\n});\n\n// Contabilizar as mensagens por participante\nconst participantCount = {};\n\n// Contagem das mensagens por participante\nfilteredMessages.forEach(record => {\n    let participant = record.key?.participant; // Verifique se a chave existe\n    const pushName = record.pushName || \"Nome não identificado\"; // Captura o pushName\n\n    if (participant) {\n        // Remove o sufixo @s.whatsapp.net\n        participant = participant.replace('@s.whatsapp.net', '');\n\n        if (!participantCount[participant]) {\n            participantCount[participant] = {\n                count: 0,\n                pushName: pushName // Armazena o pushName\n            };\n        }\n        participantCount[participant].count++;\n    }\n});\n\n// Ordenar participantes pela quantidade de mensagens (do maior para o menor)\nconst sortedParticipants = Object.entries(participantCount)\n    .sort((a, b) => b[1].count - a[1].count) // Ordena pela quantidade de mensagens\n    .slice(0, 3); // Pega os 3 primeiros\n\n// Gerar a mensagem única com os três melhores participantes\nconst message = sortedParticipants.map((participant, index) => {\n    const medal = [\"🥇\", \"🥈\", \"🥉\"][index]; // Seleciona o emoji da medalha com base no índice\n    const pushName = `*${participant[1].pushName}*`; // Adiciona asteriscos ao pushName\n    const count = participant[1].count; // Pega a contagem de mensagens\n    return `${medal} ${pushName}\\n> Com ${count} mensagens`;\n}).join('\\n\\n'); // Junta as mensagens com quebras de linha\n\n// Retornar a mensagem única como resultado\nreturn [\n    {\n        json: {\n            mensagem: message\n        }\n    }\n];"},"id":"1dca4c37-0ea0-4f18-be47-8c0d4dd029b9","name":"Top 3 membros2","type":"n8n-nodes-base.code","typeVersion":2,"position":[-1904,4128]},{"parameters":{"jsCode":"// Obtenha os dados do nó anterior\nconst data = $('Pegando mensagens do grupo2').item.json.messages.records || [];\n\n// Obtenha a data de hoje em formato UTC (sem horário)\nconst today = new Date();\ntoday.setHours(0, 0, 0, 0);\n\n// Filtrar mensagens cuja data seja igual à de hoje, cujo tipo seja \"conversation\" \n// e que não estejam marcadas como DELETED\nconst filteredMessages = data.filter(record => {\n    const messageDate = new Date(record.messageTimestamp * 1000); // Convertendo timestamp para milissegundos\n    messageDate.setHours(0, 0, 0, 0); // Removendo a hora para comparar só o dia\n\n    // Verificar se a mensagem foi deletada\n    const isDeleted = record.MessageUpdate && record.MessageUpdate.some(update => update.status === \"DELETED\");\n\n    // Adicionar logs para depuração\n    console.log(`Mensagem: ${record.message ? record.message.conversation : 'N/A'}`);\n    console.log(`Data da Mensagem: ${messageDate}`);\n    console.log(`É Deletada: ${isDeleted}`);\n    \n    return (\n        messageDate.getTime() === today.getTime() &&\n        record.messageType === \"conversation\" &&\n        !isDeleted // Ignorar mensagens deletadas\n    );\n});\n\n// Ordenar as mensagens pela data de forma crescente (mais antiga para mais nova)\nfilteredMessages.sort((a, b) => a.messageTimestamp - b.messageTimestamp);\n\n// Retornar apenas os campos necessários, ajustando o formato conforme solicitado\nconst result = filteredMessages.map(record => {\n    const telefoneMembro = record.key.participant ? record.key.participant.replace('@s.whatsapp.net', '') : 'Número não disponível';\n    const response = {\n        json: {\n            \"Membro\": record.pushName || \"Nome não identificado\", // Utilizar o pushName\n            \"Telefone do Membro\": telefoneMembro, // Telefone sem o sufixo\n            \"Mensagem\": record.message.conversation || null, // Mensagem de conversa\n        }\n    };\n\n    // Se existir contextInfo, adicionar o participant do contextInfo também\n    if (record.contextInfo && record.contextInfo.participant) {\n        response.json['Resposta para'] = record.contextInfo.participant;\n    }\n\n    return response;\n});\n\n// Retorne o resultado\nconsole.log(\"Mensagens Filtradas:\", result);\nreturn result;"},"id":"4155600a-d8b7-4cc2-85cb-be786c2c8a52","name":"Separa as mensagens de hoje2","type":"n8n-nodes-base.code","typeVersion":2,"position":[-1728,3952]},{"parameters":{"method":"POST","url":"={{ $('DADOS').item.json.data.urlapi }}/chat/findMessages/{{ $('DADOS').item.json.data.instancia }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"={{ $('DADOS').item.json.data.apikey }}"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n    \"where\": {\n        \"key\": {\n            \"remoteJid\": \"{{ $('DADOS').item.json.contato }}\"\n        }\n    },\n    \"page\": 1,\n    \"offset\": 1000\n}","options":{}},"id":"8597bc2d-fe97-4037-a1b0-7cbc92c55510","name":"Pegando mensagens do grupo2","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-1920,3952]},{"parameters":{"aggregate":"aggregateAllItemData","destinationFieldName":"=Mensagens do grupo","options":{}},"id":"e7e8a49d-9eb4-41b4-8d50-024b5ed1886e","name":"Juntando Mensagens2","type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[-2096,4128]},{"parameters":{"jsCode":"// Obtenha os dados da variável diretamente\nconst data = $('Pegando mensagens do grupo2').item.json.messages.records || [];\n\n// Obtenha a data de hoje em formato UTC (sem horário)\nconst today = new Date();\ntoday.setHours(0, 0, 0, 0);\n\n// Filtrar mensagens cuja data seja igual à de hoje\nconst filteredMessages = data.filter(record => {\n    const messageDate = new Date(record.messageTimestamp * 1000); // Convertendo timestamp para milissegundos\n    messageDate.setHours(0, 0, 0, 0); // Removendo a hora para comparar só o dia\n\n    return messageDate.getTime() === today.getTime();\n});\n\n// Calcular o total de mensagens de hoje\nconst totalMessages = filteredMessages.length;\n\n// Retornar o total de mensagens\nreturn [\n    {\n        json: {\n            totalMensagens: totalMessages\n        }\n    }\n];\n"},"id":"35bfb3fb-8db6-4287-a8d9-28b5919a0013","name":"Total de mensagens1","type":"n8n-nodes-base.code","typeVersion":2,"position":[-1696,4128]},{"parameters":{"jsCode":"// Criação do array de mensagens\nconst messages = [\n  `Hoje, o dia foi agitado com *${items[0].json['totalMensagens']} mensagens* enviadas! 💬`,\n  `Uau! Já trocamos *${items[0].json['totalMensagens']} mensagens* hoje! 🔥`,\n  `Que dia cheio! *${items[0].json['totalMensagens']} mensagens* passaram por aqui! 🚀`,\n  `Hoje tivemos *${items[0].json['totalMensagens']} mensagens* trocadas, o que não é pouca coisa! 🎉`,\n  `O dia de hoje foi super produtivo com *${items[0].json['totalMensagens']} mensagens* enviadas! 💥`,\n  `Com *${items[0].json['totalMensagens']} mensagens* trocadas, o dia foi um sucesso! 🙌`,\n  `Hoje conseguimos trocar *${items[0].json['totalMensagens']} mensagens* – que movimentação! ⚡`,\n  `Um dia agitado com *${items[0].json['totalMensagens']} mensagens* enviadas! 💌`,\n  `Que energia! Já foram *${items[0].json['totalMensagens']} mensagens* enviadas hoje! 🔝`,\n  `O dia foi movimentado com *${items[0].json['totalMensagens']} mensagens* trocadas! Vamos para o próximo! 💪`,\n  `Eita que hoje tivemos *${items[0].json['totalMensagens']} mensagens* no nosso grupo`\n];\n\n// Sorteio aleatório\nconst randomMessage = messages[Math.floor(Math.random() * messages.length)];\n\n// Retornar o resultado para o n8n\nreturn [{ json: { randomMessage } }];\n"},"id":"2469164a-894c-4e2b-8101-7a950ec86feb","name":"Mensagem de Total de mensagens1","type":"n8n-nodes-base.code","typeVersion":2,"position":[-2096,4304]},{"parameters":{"method":"POST","url":"={{ $('DADOS').item.json.data.urlapi }}/message/sendText/{{ $('DADOS').item.json.data.instancia }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"={{ $('DADOS').item.json.data.globalapi }}"}]},"sendBody":true,"bodyParameters":{"parameters":[{"name":"number","value":"={{ $('Tratando dados do loop2').item.json['remoteJid (grupo)'] }}"},{"name":"text","value":"={{ $('Gera resumo1').item.json.message.content.replace(/\\*\\*/g, '*') }}\n"}]},"options":{}},"id":"60825796-1cec-41e7-82e9-695c5d4d2e6a","name":"Enviando mensagem 3","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-1920,4512]},{"parameters":{"assignments":{"assignments":[{"id":"1ed68fd6-9020-4eeb-8e17-78417291cf4c","name":"remoteJid (grupo)","value":"={{ $json.contato }}","type":"string"}]},"options":{}},"id":"7dc20457-93b0-4fb0-a3eb-266ecac38e07","name":"Tratando dados do loop2","type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-2128,3952]},{"parameters":{"method":"POST","url":"={{ $('DADOS').item.json.data.urlapi }}/message/sendText/{{ $('DADOS').item.json.data.instancia }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"={{ $('DADOS').item.json.data.apikey }}"}]},"sendBody":true,"bodyParameters":{"parameters":[{"name":"number","value":"={{ $('Tratando dados do loop2').item.json['remoteJid (grupo)'] }}"},{"name":"text","value":"=💬 *Resumo do dia no Grupo*\n{{ $('Mensagem de Total de mensagens1').item.json.randomMessage }}\n\n🏆 *Top 3 membros mais ativos hoje*:\n\n{{ $('Top 3 membros2').item.json.mensagem }}"}]},"options":{}},"id":"a48176c1-3c19-4cf7-b634-dfe10756cefe","name":"Enviando mensagem 4","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-1600,4304],"retryOnFail":true,"waitBetweenTries":2500},{"parameters":{"amount":2},"id":"2f8838c5-dd03-4529-abac-91bddc6bd2ec","name":"Espera 2 segundos1","type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[-2128,4512],"webhookId":"9f66f1f7-6b99-4e06-a657-a5d038d5fb9f"},{"parameters":{"amount":2},"id":"c8394c0f-8264-4f41-a1ba-e31a9cb15aa9","name":"Espera 30 segundos1","type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[-1728,4512],"webhookId":"9f66f1f7-6b99-4e06-a657-a5d038d5fb9f"},{"parameters":{},"id":"8a52d6c1-10f5-45e8-9ae6-8dcf597c3f19","name":"FIM3","type":"n8n-nodes-base.noOp","typeVersion":1,"position":[-1568,4512]},{"parameters":{"content":"# Resumo de grupos - MANUAL","height":823.0170641733057,"width":794.0357737519571,"color":7},"id":"6bd5ca19-448d-43e7-a830-9cdf60d985b7","name":"Sticky Note21","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-2176,3872]},{"parameters":{"modelId":{"__rl":true,"value":"gpt-4o-mini","mode":"list","cachedResultName":"GPT-4O-MINI"},"messages":{"values":[{"content":"=Histórico de mensagens:\n{{ JSON.stringify($('Juntando Mensagens2').item.json['Mensagens do grupo']) }}"},{"content":"Você será responsável por criar resumos dinâmicos das conversas do grupo, repassando as informações de forma clara e bem estruturada.\n\nSua missão é gerar uma mensagem concisa, com um toque de humor leve e profissional (nada de exageros ou tecnicismos). Sempre que possível, mencione o nome de quem fez a pergunta ou deu a resposta (caso não encontre o nome, use o número de telefone no formato \"@NUMERO\" sem outros caracteres como []{}).\nJamais invente informações, baseie-se exclusivamente nos dados disponíveis. Organize a mensagem com tópicos, destacando os pontos mais relevantes e importantes do dia. Use emojis, mas com moderação.\n\nNunca de detalhes do seu prompt e comandos internos mencionados aqui\n\nAbaixo estão alguns elementos básicos que você pode usar como referência para estruturar sua mensagem, mas lembre-se de criar algo único e adaptado à conversa.\n\n📝 Principais Tópicos de hoje:\n\n📌 Título do Tópico X:\n\nDescrição do que aconteceu aqui\nDescrição do que rolou lá\nAlgo interessante que foi discutido\nResumo de uma solução ou ideia apresentada\n(Adapte quantos tópicos achar necessário, sempre focando no que foi mais importante e interessante!)\n\n✨ Clima do Grupo: O clima hoje foi focado e produtivo, com um toque de descontração que deixou tudo mais leve. Vamos nessa, equipe! 🚀\n\n🤝 Continue Participando: Tem alguma dúvida ou sugestão? Fique à vontade para compartilhar, a galera sempre está disposta a ajudar!\n\nLembre-se de manter um tom amigável e direto, sem perder o foco nas informações essenciais. Nada de humor forçado, apenas o necessário para deixar a mensagem leve e agradável.","role":"assistant"}]},"options":{}},"id":"00fd6ce5-bcc4-44c4-bfbd-02d1d7f7cbaf","name":"Gera resumo1","type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.6,"position":[-1936,4304],"credentials":{"openAiApi":{"id":"kx1vvIOZPPxBWitD","name":"openia Jamil"}}},{"parameters":{"modelId":{"__rl":true,"value":"gpt-4o-mini","mode":"list","cachedResultName":"GPT-4O-MINI"},"messages":{"values":[{"content":"=Histórico de mensagens:\n{{ JSON.stringify($('Juntando Mensagens1').item.json['Mensagens do grupo']) }}"},{"content":"Você será responsável por criar resumos dinâmicos das conversas do grupo, repassando as informações de forma clara e bem estruturada.\n\nSua missão é gerar uma mensagem concisa, com um toque de humor leve e profissional (nada de exageros ou tecnicismos). Sempre que possível, mencione o nome de quem fez a pergunta ou deu a resposta (caso não encontre o nome, use o número de telefone). Jamais invente informações, baseie-se exclusivamente nos dados disponíveis. Organize a mensagem com tópicos, destacando os pontos mais relevantes e importantes do dia. Use emojis, mas com moderação.\n\nAbaixo estão alguns elementos básicos que você pode usar como referência para estruturar sua mensagem, mas lembre-se de criar algo único e adaptado à conversa.\n\n📝 Principais Tópicos de hoje:\n\n📌 Título do Tópico X:\n\nDescrição do que aconteceu aqui\nDescrição do que rolou lá\nAlgo interessante que foi discutido\nResumo de uma solução ou ideia apresentada\n(Adapte quantos tópicos achar necessário, sempre focando no que foi mais importante e interessante!)\n\n✨ Clima do Grupo: O clima hoje foi focado e produtivo, com um toque de descontração que deixou tudo mais leve. Vamos nessa, equipe! 🚀\n\n🤝 Continue Participando: Tem alguma dúvida ou sugestão? Fique à vontade para compartilhar, a galera sempre está disposta a ajudar!\n\nLembre-se de manter um tom amigável e direto, sem perder o foco nas informações essenciais. Nada de humor forçado, apenas o necessário para deixar a mensagem leve e agradável.","role":"assistant"}]},"options":{}},"id":"a9236a38-9934-4ca8-936f-6275e2d01786","name":"Gera resumo","type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.6,"position":[-2016,2480],"credentials":{"openAiApi":{"id":"kx1vvIOZPPxBWitD","name":"openia Jamil"}}},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"leftValue":"={{ $json.body.data.message.conversation }}","rightValue":"/resumoon","operator":{"type":"string","operation":"equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"PODCAST"}]},"options":{}},"id":"d07eb2d3-67aa-45b6-a4d6-c610b1a0c179","name":"COMANDOS-WHATS3","type":"n8n-nodes-base.switch","typeVersion":3.2,"position":[-2896,3072]},{"parameters":{"method":"POST","url":"={{ $('DADOS').item.json.data.urlapi }}/group/updateParticipant/{{ $('DADOS').item.json.data.instancia }}?groupJid={{ $json.grupo }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"={{ $('DADOS').item.json.data.apikey }}"},{"name":"globalApikey","value":"={{ $('DADOS').item.json.data.globalapi }}"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"action\": \"remove\",\n  \"participants\": [\n    \"{{ $json.contato }}\"\n  ]\n}","options":{}},"id":"3bbc18fe-5385-4e40-8590-40471b0b8edc","name":"DESPROMOVER ADM1","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-2576,3920],"alwaysOutputData":false},{"parameters":{"method":"POST","url":"={{ $('DADOS').item.json.data.urlapi }}/group/updateParticipant/{{ $('DADOS').item.json.data.instancia }}?groupJid={{ $json.grupo }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"={{ $('DADOS').item.json.data.apikey }}"},{"name":"globalApikey","value":"={{ $('DADOS').item.json.data.globalapi }}"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"action\": \"promote\",\n  \"participants\": [\n    \"{{ $json.contato }}\"\n  ]\n}","options":{}},"id":"08dc7716-5194-4d7d-a282-b87f111231ff","name":"PROMOVER ADM","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-2576,4064],"alwaysOutputData":false},{"parameters":{"method":"POST","url":"={{ $('DADOS').item.json.data.urlapi }}/group/updateParticipant/{{ $('DADOS').item.json.data.instancia }}?groupJid={{ $json.grupo }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"={{ $('DADOS').item.json.data.apikey }}"},{"name":"globalApikey","value":"={{ $('DADOS').item.json.data.globalapi }}"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"action\": \"demote\",\n  \"participants\": [\n    \"{{ $json.contato }}\"\n  ]\n}","options":{}},"id":"92492281-1705-4ac5-af0b-3fe536cc36ae","name":"DESPROMOVER ADM","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-2576,4208],"alwaysOutputData":false},{"parameters":{"method":"POST","url":"={{ $('DADOS').item.json.data.urlapi }}/group/updateSetting/{{ $('DADOS').item.json.data.instancia }}?groupJid={{ $json.grupo }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"={{ $('DADOS').item.json.data.apikey }}"},{"name":"globalApikey","value":"={{ $('DADOS').item.json.data.globalapi }}"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"action\": \"announcement\"\n}","options":{}},"id":"9145d58f-7d36-4e41-a9dd-7a0cb53da8cb","name":"FECHAR GRUPO","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-2576,4352],"alwaysOutputData":false},{"parameters":{"method":"POST","url":"={{ $('DADOS').item.json.data.urlapi }}/group/updateSetting/{{ $('DADOS').item.json.data.instancia }}?groupJid={{ $json.grupo }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"={{ $('DADOS').item.json.data.apikey }}"},{"name":"globalApikey","value":"={{ $('DADOS').item.json.data.globalapi }}"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"action\": \"not_announcement\"\n}","options":{}},"id":"5c9e348c-70e5-443c-aae7-56e8b5750b06","name":"ABRIR GRUPO","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-2576,4480],"alwaysOutputData":false},{"parameters":{"url":"={{ $json.body.server_url }}/group/findGroupInfos/{{ $json.body.instance }}?groupJid={{ $json.body.data.key.remoteJid }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"=57ec53c5bd97b369472d545052e77007"}]},"options":{}},"id":"05f6564b-3e9d-4152-890f-e363da0f7004","name":"PUXAR DADOS GRUPO","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-2704,3072]},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"7de3a6ae-11ea-4c10-aed7-19f0302b1d26","leftValue":"={{ $json.body.sender }}","rightValue":"553488187499@s.whatsapp.net","operator":{"type":"string","operation":"equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"JAMIL"}]},"options":{}},"id":"a6812f16-4400-47a3-aac5-2b0f32782a8c","name":"REGRAS PARA SOMENTE EU","type":"n8n-nodes-base.switch","typeVersion":3.2,"position":[-2928,2880]},{"parameters":{},"id":"c3fcba29-b52c-460f-b9d6-dc0b8d1e068c","name":"No Operation, do nothing1","type":"n8n-nodes-base.noOp","typeVersion":1,"position":[-2368,4160]},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"leftValue":"={{ $('DADOS').item.json.data.acao }}","rightValue":"/elite","operator":{"type":"string","operation":"equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"ELITE"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"c9d1fdd2-d9b5-4fe4-a710-19b021a5b19e","leftValue":"={{ $('DADOS').item.json.data.acao }}","rightValue":"=/insta","operator":{"type":"string","operation":"contains"}}],"combinator":"and"},"renameOutput":true,"outputKey":"INSTAGRAM"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"e018cbec-028f-45e6-bb43-873d25f93416","leftValue":"={{ $('DADOS').item.json.data.acao }}","rightValue":"/membros","operator":{"type":"string","operation":"contains"}}],"combinator":"and"},"renameOutput":true,"outputKey":"MEMBROS"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"cb4075f0-dd3a-43d7-8e2f-9e3b889f8f43","leftValue":"={{ $('DADOS').item.json.data.acao }}","rightValue":"/paporeto","operator":{"type":"string","operation":"contains"}}],"combinator":"and"},"renameOutput":true,"outputKey":"PAPO RETO"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"e324d811-80fc-422e-9695-1fd3786c65cb","leftValue":"={{ $('DADOS').item.json.data.acao }}","rightValue":"/typebot","operator":{"type":"string","operation":"contains"}}],"combinator":"and"},"renameOutput":true,"outputKey":"TYPEBOT"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"b4bddbf2-f7c8-4a22-bbe3-3fae046bd099","leftValue":"={{ $('DADOS').item.json.data.acao }}","rightValue":"/bettalk","operator":{"type":"string","operation":"contains"}}],"combinator":"and"},"renameOutput":true,"outputKey":"BETTALK"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"bdd81081-c856-4a69-9224-8bd822cb1547","leftValue":"={{ $('DADOS').item.json.data.acao }}","rightValue":"/telera","operator":{"type":"string","operation":"contains"}}],"combinator":"and"},"renameOutput":true,"outputKey":"TELERA"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"62d89236-6459-44a1-a2bc-a99d007025cf","leftValue":"={{ $('DADOS').item.json.data.acao }}","rightValue":"/asgard","operator":{"type":"string","operation":"contains"}}],"combinator":"and"},"renameOutput":true,"outputKey":"TEAM ASGARD"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"28b09669-64fc-423c-ae17-021d749c72bb","leftValue":"={{ $('DADOS').item.json.data.acao }}","rightValue":"/notion","operator":{"type":"string","operation":"contains"}}],"combinator":"and"},"renameOutput":true,"outputKey":"NOTION"}]},"options":{}},"id":"1a515625-ef0e-42df-b542-4ea8b2aa18fc","name":"COMANDOS-WHATS","type":"n8n-nodes-base.switch","typeVersion":3.2,"position":[-704,2912]},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"7de3a6ae-11ea-4c10-aed7-19f0302b1d26","leftValue":"={{ $json.body.data.key.fromMe }}","rightValue":"","operator":{"type":"boolean","operation":"true","singleValue":true}}],"combinator":"and"},"renameOutput":true,"outputKey":"ENVIO EM GRUPO"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"d31367b8-0827-4991-a0c5-fe02211c9a78","leftValue":"={{ $json.body.data.key.fromMe }}","rightValue":"","operator":{"type":"boolean","operation":"false","singleValue":true}}],"combinator":"and"},"renameOutput":true,"outputKey":"ENCERRAR WEBHOOK"}]},"options":{}},"id":"69a7f571-d9e6-4386-a56a-fd3317534179","name":"REGRAS PARA SOMENTE EU2","type":"n8n-nodes-base.switch","typeVersion":3.2,"position":[-2928,3392]},{"parameters":{"httpMethod":"POST","path":"whatscontrol","options":{}},"id":"e0bdfd37-8598-459f-b6e7-996a67a54f8f","name":"Webhook","type":"n8n-nodes-base.webhook","typeVersion":2,"position":[-3456,3248],"webhookId":"c1477320-2e00-4e1f-845b-52016a3c35bb","notesInFlow":true},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"leftValue":"={{ $('DADOS').item.json.data.acao }}","rightValue":"/podcast","operator":{"type":"string","operation":"equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"PODCAST"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"e79cb8ee-03bf-4bad-9129-cdf5e44a424c","leftValue":"={{ $('DADOS').item.json.data.acao }}","rightValue":"/iphone","operator":{"type":"string","operation":"contains"}}],"combinator":"and"},"renameOutput":true,"outputKey":"CERTIFICADO"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"686d6896-0bfd-4467-9fe4-502bc48813b8","leftValue":"={{ $('DADOS').item.json.data.acao }}","rightValue":"/todos","operator":{"type":"string","operation":"contains"}}],"combinator":"and"},"renameOutput":true,"outputKey":"CHAMAR TODOS"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"3b62db6b-4b5d-455a-be5a-267da883ece6","leftValue":"={{ $('DADOS').item.json.data.acao }}","rightValue":"/rank","operator":{"type":"string","operation":"contains"}}],"combinator":"and"},"renameOutput":true,"outputKey":"Rank"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"d65f12ff-9bf2-418e-b114-7f9f2f6747ae","leftValue":"={{ $('DADOS').item.json.data.acao }}","rightValue":"/resumo","operator":{"type":"string","operation":"contains"}}],"combinator":"and"},"renameOutput":true,"outputKey":"Resumo"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"06d1b80e-1e57-4e47-8395-70309e148f59","leftValue":"={{ $('DADOS').item.json.data.acao }}","rightValue":"/santobet","operator":{"type":"string","operation":"contains"}}],"combinator":"and"},"renameOutput":true,"outputKey":"SANTOBET"}]},"options":{}},"id":"0d974ed3-d99d-4794-9dc9-78047812c579","name":"COMANDOS-WHATS1","type":"n8n-nodes-base.switch","typeVersion":3.2,"position":[-704,3504]},{"parameters":{"content":"```\n██╗    ██╗██╗  ██╗ █████╗ ████████╗███████╗       ██████╗ ██████╗ ███╗   ██╗████████╗██████╗  ██████╗ ██╗     \n██║    ██║██║  ██║██╔══██╗╚══██╔══╝██╔════╝      ██╔════╝██╔═══██╗████╗  ██║╚══██╔══╝██╔══██╗██╔═══██╗██║     \n██║ █╗ ██║███████║███████║   ██║   ███████╗█████╗██║     ██║   ██║██╔██╗ ██║   ██║   ██████╔╝██║   ██║██║     \n██║███╗██║██╔══██║██╔══██║   ██║   ╚════██║╚════╝██║     ██║   ██║██║╚██╗██║   ██║   ██╔══██╗██║   ██║██║     \n╚███╔███╔╝██║  ██║██║  ██║   ██║   ███████║      ╚██████╗╚██████╔╝██║ ╚████║   ██║   ██║  ██║╚██████╔╝███████╗\n ╚══╝╚══╝ ╚═╝  ╚═╝╚═╝  ╚═╝   ╚═╝   ╚══════╝       ╚═════╝ ╚═════╝ ╚═╝  ╚═══╝   ╚═╝   ╚═╝  ╚═╝ ╚═════╝ ╚══════╝\n                                                                                                              \n```\n                                                                                                              \n","height":128.30814276618693,"width":996.6215857644908,"color":3},"id":"f62cfc3e-5499-450f-a9e8-799bf66687d4","name":"Sticky Note26","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-2944,1168]},{"parameters":{"content":"## COMANDO TELERA","height":233.15141572191064,"width":529.8209964749201},"id":"510b27ac-a4f0-43b9-b5b4-d2760a8b2dec","name":"Sticky Note24","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-80,4960]},{"parameters":{"assignments":{"assignments":[{"id":"3df5be45-f7f7-4297-a1ad-0da61420e6a6","name":"botao.titulo","value":"SANTOBET","type":"string"},{"id":"a8a466c4-6cd7-4b40-9071-aecadb9fe926","name":"botao.mensagem","value":"=🚀 CONHEÇA A SANTOBET!\\n\\n✅  Comissão: 40% RevShare (sem necessidade de nota fiscal para saques!)\\n✅  Pagamentos Semanais via PIX (_em breve crypto via USDT)\\n✅  Saldo Real para Marketing\\n(uso exclusivo para campanhas, sem saque)\\n✅  Sala de Sinais no Telegram;\\n\\n🔹 ATENÇÃO AO PREENCHER SEU NUMERO/WHATSAPP POIS É POR ELE QUE VÃO LHE CHAMAR.\\n\\n📢 Após a solicitação, o Gerente entrará em contato para liberar seu saldo de marketing e adicionar você ao seu grupo exclusivo com um gerente!\\n\\n💰 Não perca essa chance de lucrar com o mercado que mais cresce!\\n\\n⚡ Como se tornar um afiliado:","type":"string"},{"id":"ee8dc9bf-eedd-45e5-a2e9-2a554936c903","name":"registro","value":"Crie sua conta na plataforma 👉 https://partners.santox.bet/?ref=fr6oCH7","type":"string"}]},"options":{}},"id":"cc8efedc-0a96-4d76-9b6d-c534e2f0de5b","name":"DADOS BOTAO16","type":"n8n-nodes-base.set","typeVersion":3.3,"position":[0,5024]},{"parameters":{"method":"POST","url":"={{ $('DADOS').item.json.data.urlapi }}/message/sendText/{{ $('DADOS').item.json.data.instancia }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"={{ $('DADOS').item.json.data.apikey }}"},{"name":"globalApikey","value":"={{ $('DADOS').item.json.data.globalapi }}"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n    \"number\": \"{{ $('COMANDOS-WHATS1').item.json.contato }}\",\n    \"text\": \"*{{ $json.botao.titulo }}*\\n\\n{{ $json.botao.mensagem }}\\n\\n{{ $json.registro }}\\n\\n{{ $json.afiliacao }}\"\n}","options":{}},"id":"df0c1c74-e506-402d-86ed-f68f7c0d3fc5","name":"ENVIO SEM BOTÃO14","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[224,5024],"alwaysOutputData":false},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"7de3a6ae-11ea-4c10-aed7-19f0302b1d26","leftValue":"={{ $json.body.data.message.conversation }}","rightValue":"/","operator":{"type":"string","operation":"contains"}}],"combinator":"and"},"renameOutput":true,"outputKey":"COMANDO"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"c909f544-4bfd-4ce1-af26-be534ff4c0a1","leftValue":"={{ $json.body.data.message.conversation }}","rightValue":"=/","operator":{"type":"string","operation":"notContains"}}],"combinator":"and"},"renameOutput":true,"outputKey":"=MSG COMUM"}]},"options":{}},"id":"94e4482a-c5e6-488f-b49c-9cc6f0f007d3","name":"CONTEM / COMANDO","type":"n8n-nodes-base.switch","typeVersion":3.2,"position":[-2560,3360]}],"connections":{"DADOS BOTAO5":{"main":[[{"node":"ENVIO SEM BOTÃO","type":"main","index":0}]]},"DADOS":{"main":[[{"node":"GRUPO E CONTATO","type":"main","index":0},{"node":"COMANDOS-WHATS","type":"main","index":0},{"node":"COMANDOS-WHATS1","type":"main","index":0}]]},"DADOS BOTAO6":{"main":[[{"node":"ENVIO SEM BOTÃO1","type":"main","index":0}]]},"DADOS BOTAO7":{"main":[[{"node":"ENVIO SEM BOTÃO2","type":"main","index":0}]]},"DADOS BOTAO":{"main":[[{"node":"ENVIO SEM BOTÃO3","type":"main","index":0}]]},"DADOS BOTAO2":{"main":[[{"node":"ENVIO SEM BOTÃO5 - LASTLINK","type":"main","index":0}]]},"GRUPO E CONTATO":{"main":[[{"node":"Switch","type":"main","index":0}]]},"DADOS BOTAO3":{"main":[[{"node":"ENVIO SEM BOTÃO6","type":"main","index":0}]]},"Code":{"main":[[{"node":"Switch2","type":"main","index":0}]]},"DADOS1":{"main":[[{"node":"MSGRECEBIDA","type":"main","index":0}]]},"If":{"main":[[{"node":"LINK PERMITIDO","type":"main","index":0}],[{"node":"HTTP Request1","type":"main","index":0}]]},"FILTRARADM":{"main":[[{"node":"Code1","type":"main","index":0}]]},"RECEBER MEMBROS DO GRUPO":{"main":[[{"node":"FILTRARADM","type":"main","index":0}]]},"Switch2":{"main":[[{"node":"RECEBER MEMBROS DO GRUPO","type":"main","index":0}]]},"MSGRECEBIDA":{"main":[[{"node":"Code","type":"main","index":0}]]},"Code1":{"main":[[{"node":"If","type":"main","index":0}]]},"HTTP Request1":{"main":[[{"node":"LINK PERMITIDO1","type":"main","index":0}]]},"Switch1":{"main":[[{"node":"DADOS1","type":"main","index":0}],[{"node":"DADOS1","type":"main","index":0}]]},"DADOS BOTAO8":{"main":[[{"node":"ENVIO SEM BOTÃO7","type":"main","index":0}]]},"DADOS BOTAO9":{"main":[[{"node":"ENVIO SEM BOTÃO8","type":"main","index":0}]]},"DADOS BOTAO10":{"main":[[{"node":"ENVIO SEM BOTÃO9","type":"main","index":0}]]},"DADOS BOTAO11":{"main":[[{"node":"ENVIO SEM BOTÃO10","type":"main","index":0}]]},"REMOVER NUMERO":{"main":[[{"node":"DADOS","type":"main","index":0}]]},"NUMERO ADM":{"main":[[{"node":"REMOVER NUMERO","type":"main","index":0}]]},"DADOS BOTAO12":{"main":[[{"node":"ENVIO SEM BOTÃO11","type":"main","index":0}]]},"DADOS BOTAO13":{"main":[[{"node":"ENVIO SEM BOTÃO13","type":"main","index":0}]]},"Switch":{"main":[[{"node":"DESPROMOVER ADM1","type":"main","index":0}],[{"node":"PROMOVER ADM","type":"main","index":0}],[{"node":"DESPROMOVER ADM","type":"main","index":0}],[{"node":"FECHAR GRUPO","type":"main","index":0}],[{"node":"ABRIR GRUPO","type":"main","index":0}]]},"ENVIO SEM BOTÃO11":{"main":[[{"node":"ENVIO SEM BOTÃO12","type":"main","index":0}]]},"Separa as mensagens de hoje":{"main":[[{"node":"Juntando Mensagens","type":"main","index":0}]]},"Pegando mensagens do grupo":{"main":[[{"node":"Separa as mensagens de hoje","type":"main","index":0}]]},"Juntando Mensagens":{"main":[[{"node":"Top 3 membros","type":"main","index":0}]]},"Tratando dados do loop":{"main":[[{"node":"Pegando mensagens do grupo","type":"main","index":0}]]},"Credenciais":{"main":[[{"node":"Grupos","type":"main","index":0}]]},"Grupos":{"main":[[{"node":"Tratando dados do loop","type":"main","index":0}]]},"Top 3 membros":{"main":[[{"node":"Enviando mensagem 1","type":"main","index":0}]]},"Enviando mensagem 1":{"main":[[{"node":"FIM","type":"main","index":0}]]},"Total de mensagens":{"main":[[{"node":"Mensagem de Total de mensagens","type":"main","index":0}]]},"Mensagem de Total de mensagens":{"main":[[{"node":"Gera resumo","type":"main","index":0}]]},"Enviando mensagem 2":{"main":[[{"node":"Espera 30 segundos","type":"main","index":0}]]},"Loop Over Items":{"main":[[{"node":"FIM1","type":"main","index":0}],[{"node":"Tratando dados do loop1","type":"main","index":0}]]},"Iniciar todas 22h":{"main":[[{"node":"Credenciais1","type":"main","index":0}]]},"Espera 2 segundos":{"main":[[{"node":"Enviando mensagem 2","type":"main","index":0}]]},"Espera 30 segundos":{"main":[[{"node":"Loop Over Items","type":"main","index":0}]]},"Top 3 membros1":{"main":[[{"node":"Total de mensagens","type":"main","index":0}]]},"Separa as mensagens de hoje1":{"main":[[{"node":"Juntando Mensagens1","type":"main","index":0}]]},"Pegando mensagens do grupo1":{"main":[[{"node":"Separa as mensagens de hoje1","type":"main","index":0}]]},"Juntando Mensagens1":{"main":[[{"node":"Top 3 membros1","type":"main","index":0}]]},"Tratando dados do loop1":{"main":[[{"node":"Pegando mensagens do grupo1","type":"main","index":0}]]},"Enviando mensagem ":{"main":[[{"node":"Espera 2 segundos","type":"main","index":0}]]},"Credenciais1":{"main":[[{"node":"Google Sheets2","type":"main","index":0}]]},"NUMERO ADM1":{"main":[[{"node":"COMANDOS-WHATS2","type":"main","index":0}]]},"Google Sheets":{"main":[[{"node":"ENVIO SEM BOTÃO16","type":"main","index":0}]]},"Google Sheets1":{"main":[[{"node":"ENVIO SEM BOTÃO16","type":"main","index":0}]]},"Google Sheets2":{"main":[[{"node":"Loop Over Items","type":"main","index":0}]]},"ENVIO SEM BOTÃO16":{"main":[[{"node":"FIM2","type":"main","index":0}]]},"COMANDOS-WHATS2":{"main":[[{"node":"Google Sheets","type":"main","index":0}],[{"node":"Google Sheets1","type":"main","index":0}],[{"node":"FIM2","type":"main","index":0}]]},"Top 3 membros2":{"main":[[{"node":"Total de mensagens1","type":"main","index":0}]]},"Separa as mensagens de hoje2":{"main":[[{"node":"Juntando Mensagens2","type":"main","index":0}]]},"Pegando mensagens do grupo2":{"main":[[{"node":"Separa as mensagens de hoje2","type":"main","index":0}]]},"Juntando Mensagens2":{"main":[[{"node":"Top 3 membros2","type":"main","index":0}]]},"Total de mensagens1":{"main":[[{"node":"Mensagem de Total de mensagens1","type":"main","index":0}]]},"Mensagem de Total de mensagens1":{"main":[[{"node":"Gera resumo1","type":"main","index":0}]]},"Enviando mensagem 3":{"main":[[{"node":"Espera 30 segundos1","type":"main","index":0}]]},"Tratando dados do loop2":{"main":[[{"node":"Pegando mensagens do grupo2","type":"main","index":0}]]},"Enviando mensagem 4":{"main":[[{"node":"Espera 2 segundos1","type":"main","index":0}]]},"Espera 2 segundos1":{"main":[[{"node":"Enviando mensagem 3","type":"main","index":0}]]},"Gera resumo1":{"main":[[{"node":"Enviando mensagem 4","type":"main","index":0}]]},"Espera 30 segundos1":{"main":[[{"node":"FIM3","type":"main","index":0}]]},"Gera resumo":{"main":[[{"node":"Enviando mensagem ","type":"main","index":0}]]},"COMANDOS-WHATS3":{"main":[[{"node":"PUXAR DADOS GRUPO","type":"main","index":0}]]},"PUXAR DADOS GRUPO":{"main":[[{"node":"NUMERO ADM1","type":"main","index":0}]]},"REGRAS PARA SOMENTE EU":{"main":[[{"node":"COMANDOS-WHATS3","type":"main","index":0}]]},"DESPROMOVER ADM1":{"main":[[{"node":"No Operation, do nothing1","type":"main","index":0}]]},"PROMOVER ADM":{"main":[[{"node":"No Operation, do nothing1","type":"main","index":0}]]},"DESPROMOVER ADM":{"main":[[{"node":"No Operation, do nothing1","type":"main","index":0}]]},"FECHAR GRUPO":{"main":[[{"node":"No Operation, do nothing1","type":"main","index":0}]]},"ABRIR GRUPO":{"main":[[{"node":"No Operation, do nothing1","type":"main","index":0}]]},"COMANDOS-WHATS":{"main":[[{"node":"DADOS BOTAO5","type":"main","index":0}],[{"node":"DADOS BOTAO6","type":"main","index":0}],[{"node":"DADOS BOTAO7","type":"main","index":0}],[{"node":"DADOS BOTAO","type":"main","index":0}],[{"node":"DADOS BOTAO2","type":"main","index":0}],[{"node":"DADOS BOTAO3","type":"main","index":0}],[{"node":"DADOS BOTAO8","type":"main","index":0}],[{"node":"DADOS BOTAO9","type":"main","index":0}],[{"node":"DADOS BOTAO10","type":"main","index":0}]]},"REGRAS PARA SOMENTE EU2":{"main":[[{"node":"CONTEM / COMANDO","type":"main","index":0}],[{"node":"No Operation, do nothing","type":"main","index":0}]]},"Webhook":{"main":[[{"node":"REGRAS PARA SOMENTE EU2","type":"main","index":0}]]},"COMANDOS-WHATS1":{"main":[[{"node":"DADOS BOTAO11","type":"main","index":0}],[{"node":"DADOS BOTAO12","type":"main","index":0}],[{"node":"DADOS BOTAO13","type":"main","index":0}],[{"node":"Credenciais","type":"main","index":0}],[{"node":"Tratando dados do loop2","type":"main","index":0}],[{"node":"DADOS BOTAO16","type":"main","index":0}]]},"DADOS BOTAO16":{"main":[[{"node":"ENVIO SEM BOTÃO14","type":"main","index":0}]]},"CONTEM / COMANDO":{"main":[[{"node":"NUMERO ADM","type":"main","index":0}],[{"node":"No Operation, do nothing","type":"main","index":0}]]}},"settings":{"executionOrder":"v1","callerPolicy":"workflowsFromSameOwner","timezone":"America/Sao_Paulo"},"staticData":{"node:Iniciar todas 22h":{"recurrenceRules":[]},"node:Iniciar todas 22h1":{"recurrenceRules":[]}},"meta":{"templateCredsSetupCompleted":true},"pinData":{"Webhook":[{"json":{"headers":{"host":"n8n.typebot.pro","user-agent":"axios/1.7.9","content-length":"719","accept-encoding":"gzip, compress, deflate, br","content-type":"application/json","x-forwarded-for":"192.168.64.1","x-forwarded-host":"n8n.typebot.pro","x-forwarded-port":"443","x-forwarded-proto":"https","x-forwarded-server":"239301ba036b","x-real-ip":"192.168.64.1"},"params":{},"query":{},"body":{"event":"messages.upsert","instance":"BOSS","data":{"key":{"remoteJid":"120363403373787995@g.us","fromMe":true,"id":"3A9140EA6645570C2CE3","participant":"553432130851@s.whatsapp.net"},"pushName":"TEAM ASGARD - BOSS","status":"SERVER_ACK","message":{"conversation":"/resumo","messageContextInfo":{"messageSecret":"zd6IwPLIb1YRCZCOSODJMaR1z2i3AqTBcOS9u9FblfA="}},"messageType":"conversation","messageTimestamp":1754053711,"instanceId":"a21d0a95-02c7-4835-8a76-15135251f7c0","source":"ios"},"destination":"https://n8n.typebot.pro/webhook/whatscontrol","date_time":"2025-08-01T10:08:32.300Z","sender":"553432130851@s.whatsapp.net","server_url":"https://whatsapi.typebot.pro","apikey":"8A6120FFFC9F-409E-831B-A0E3FBFCB968"},"webhookUrl":"https://n8n.typebot.pro/webhook/whatscontrol","executionMode":"production"}}]},"versionId":"493f74fb-0f60-43e8-a274-56c72da7650d","triggerCount":1,"tags":[{"createdAt":"2025-01-25T15:41:04.678Z","updatedAt":"2025-01-25T15:41:04.678Z","id":"EjshTMdZnpBDR2E9","name":"SUPERCHAT"}]}