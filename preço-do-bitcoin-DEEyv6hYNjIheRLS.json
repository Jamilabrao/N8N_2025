{"createdAt":"2025-01-09T21:19:21.803Z","updatedAt":"2025-07-31T17:25:27.192Z","id":"DEEyv6hYNjIheRLS","name":"PRE√áO DO BITCOIN","active":true,"isArchived":false,"nodes":[{"parameters":{"rule":{"interval":[{"field":"hours"}]}},"id":"619cb727-a037-451b-b21d-b7d9e1af1548","name":"Schedule Trigger1","type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.2,"position":[-1328,-784]},{"parameters":{"fieldToSplitOut":"data","options":{}},"id":"ebf45e91-e1a5-4e43-abd9-84c86478b142","name":"Split Out","type":"n8n-nodes-base.splitOut","typeVersion":1,"position":[-400,-784]},{"parameters":{"jsCode":"// Obt√©m os dados do n√≥ anterior no formato padr√£o do n8n\nlet items = $input.all();\n\n// Mapeia cada item e formata os valores\nlet formattedData = items.map(item => {\n  let data = item.json; // Acessa o objeto JSON de cada item\n  return {\n    moeda: data.moeda,\n    valor: parseFloat(data.valor).toFixed(2), // Formata o valor com duas casas decimais\n    ultimas24hrs: parseFloat(data.ultimas24hrs).toFixed(2), // Formata ultimas24hrs com duas casas decimais\n    ultimahora: parseFloat(data.ultimahora).toFixed(2), // Formata ultimahora com duas casas decimais\n    setedias: parseFloat(data.setedias).toFixed(2), // Formata ultimahora com duas casas decimais\n    trintadias: parseFloat(data.trintadias).toFixed(2) // Formata ultimahora com duas casas decimais\n  };\n});\n\n// Retorna os dados formatados para o pr√≥ximo n√≥\nreturn formattedData.map(data => ({ json: data }));\n"},"id":"ba284c93-3a0f-4d93-9fca-6da5739395d9","name":"Code8","type":"n8n-nodes-base.code","typeVersion":2,"position":[-48,-784]},{"parameters":{"assignments":{"assignments":[{"id":"38581cef-c52b-462c-b674-170201fc9896","name":"moeda","value":"={{ $json.name }}","type":"string"},{"id":"690b76b4-bcee-429a-b019-9ef7737a5fda","name":"valor","value":"={{ $json.quote.USD.price }}","type":"string"},{"id":"101bdd32-b97c-4897-94c0-2156170513dd","name":"ultimas24hrs","value":"={{ $json.quote.USD.percent_change_24h }}","type":"string"},{"id":"15f07c6e-f7c1-4ad1-b160-f02d5fb365c3","name":"ultimahora","value":"={{ $json.quote.USD.percent_change_1h }}","type":"string"},{"id":"f17a1feb-448d-4bf2-a8bb-0afe4fb33d1e","name":"setedias","value":"={{ $json.quote.USD.percent_change_7d }}","type":"string"},{"id":"88f95195-293a-4582-86ed-9833fb866acb","name":"trintadias","value":"={{ $json.quote.USD.percent_change_30d }}","type":"string"}]},"options":{}},"id":"bf4192b7-5b3e-4f12-a4f7-e5af5eff933c","name":"moedas","type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-224,-784]},{"parameters":{"aggregate":"aggregateAllItemData","options":{}},"id":"5cc152c9-ee36-4f59-8e97-8ef24be75557","name":"Aggregate2","type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[128,-784]},{"parameters":{"jsCode":"// Obt√©m os dados do n√≥ anterior\nlet items = $input.all();\n\n// Extrai os dados do JSON\nlet data = items[0].json.data;\n\n// Monta a mensagem formatada com \\\\n para as quebras de linha\nlet message = data.map(item => {\n  return `üî∞ Moeda: ${item.moeda}\\\\nValor: ${item.valor}\\\\nUltima Hora: ${item.ultimahora}%\\\\nUltimas 24hrs: ${item.ultimas24hrs}%\\\\n7 Dias: ${item.setedias}%\\\\n30 Dias: ${item.trintadias}%`;\n}).join('\\\\n\\\\n'); // Junta cada bloco com uma quebra de linha dupla\n\n// Retorna a mensagem formatada como um √∫nico item\nreturn {\n  json: {\n    message: message.trim() // Remove qualquer quebra de linha extra no final\n  }\n};\n"},"id":"2cda290d-eb79-477a-a999-49feab08ddde","name":"Code9","type":"n8n-nodes-base.code","typeVersion":2,"position":[384,-688]},{"parameters":{"url":"https://data-api.binance.vision/api/v3/ticker/price?symbol=USDTBRL","options":{}},"id":"0f309721-a5cf-44d1-af31-87f551b1f31c","name":"DOLAR AGORA","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[560,-688],"retryOnFail":true},{"parameters":{"content":"```\n ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà    ‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà        ‚ñà‚ñà     ‚ñà‚ñà ‚ñà‚ñà   ‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà \n‚ñà‚ñà      ‚ñà‚ñà   ‚ñà‚ñà  ‚ñà‚ñà  ‚ñà‚ñà  ‚ñà‚ñà   ‚ñà‚ñà    ‚ñà‚ñà    ‚ñà‚ñà    ‚ñà‚ñà       ‚ñà‚ñà     ‚ñà‚ñà ‚ñà‚ñà   ‚ñà‚ñà ‚ñà‚ñà   ‚ñà‚ñà    ‚ñà‚ñà    ‚ñà‚ñà      \n‚ñà‚ñà      ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà    ‚ñà‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà     ‚ñà‚ñà    ‚ñà‚ñà    ‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà  ‚ñà  ‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà    ‚ñà‚ñà    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà \n‚ñà‚ñà      ‚ñà‚ñà   ‚ñà‚ñà    ‚ñà‚ñà    ‚ñà‚ñà         ‚ñà‚ñà    ‚ñà‚ñà    ‚ñà‚ñà       ‚ñà‚ñà ‚ñà‚ñà‚ñà ‚ñà‚ñà ‚ñà‚ñà   ‚ñà‚ñà ‚ñà‚ñà   ‚ñà‚ñà    ‚ñà‚ñà         ‚ñà‚ñà \n ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà   ‚ñà‚ñà    ‚ñà‚ñà    ‚ñà‚ñà         ‚ñà‚ñà     ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà         ‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà  ‚ñà‚ñà   ‚ñà‚ñà ‚ñà‚ñà   ‚ñà‚ñà    ‚ñà‚ñà    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà \n                                                                                                    \n                                                                                                    \n","height":133.75120767772074,"width":929.4682783318663,"color":3},"id":"9b21cc59-1eec-4862-a7d2-d5feb3e31527","name":"Sticky Note","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-336,-1040]},{"parameters":{"content":"## CRIA A MENSSAGEM DE ACORDO COM O QUE RECEBE\n## BAIXA VALOR DO DOLAR EM REAL\n## ENVIA NO GRUPO DO WHATSAPP","height":522,"width":1102},"id":"cfaadacf-4bf3-4776-9eac-ac0c0620f7f0","name":"Sticky Note2","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[320,-880]},{"parameters":{"url":"https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest","sendQuery":true,"queryParameters":{"parameters":[{"name":"id","value":"={{ $json.resultado }}"},{"name":"convert","value":"USD"}]},"sendHeaders":true,"headerParameters":{"parameters":[{"name":"X-CMC_PRO_API_KEY","value":"724c5bfe-e3a8-44b2-8c1d-9723046c6ebf"},{"name":"Accept","value":"application/json"}]},"options":{}},"id":"ef9c9842-bcca-4b26-9ec7-e852fc711942","name":"PUXAR VALOR CRYPTO","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-656,-784]},{"parameters":{"assignments":{"assignments":[{"id":"38581cef-c52b-462c-b674-170201fc9896","name":"BTC","value":"1","type":"string"},{"id":"690b76b4-bcee-429a-b019-9ef7737a5fda","name":"XRP","value":"1027","type":"string"},{"id":"101bdd32-b97c-4897-94c0-2156170513dd","name":"ETHEREUM","value":"52","type":"string"},{"id":"15f07c6e-f7c1-4ad1-b160-f02d5fb365c3","name":"SOLANA","value":"5426","type":"string"},{"id":"dc41a9dd-7fe0-4547-a1d5-007cd534b8eb","name":"DOGCOIN","value":"74","type":"string"},{"id":"1abec304-6a63-426a-af48-d8dfa0aaef36","name":"CARDANO","value":"2010","type":"string"},{"id":"67d3ea9f-25b1-480e-b30b-4522b070fd66","name":"BNB","value":"1839","type":"string"}]},"options":{}},"id":"6f6d71a8-4169-4851-8282-9d0cce117756","name":"cod_moedas","type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-1104,-784]},{"parameters":{"jsCode":"const data = $input.item.json; \n\n// Pega os valores do objeto e os junta com v√≠rgula\nconst resultado = Object.values(data).join(\",\");\n\nreturn {\n  json: {\n    resultado: resultado\n  }\n};\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-880,-784],"id":"9ac63b47-93d9-46a8-be2a-4d57ddfe700a","name":"Code"},{"parameters":{"content":"## DEFINA ID DAS MOEDAS UISANDO O UCID DA COINMARKETCAP","height":282,"width":874,"color":4},"id":"72b604a4-66b9-4d97-ac2d-a58754de2d1a","name":"Sticky Note3","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-1360,-864]},{"parameters":{"content":"## RECEBE E TRATA AS INFORMA√á√ïES","height":282,"width":754,"color":3},"id":"ab6f9d48-ba5d-46c6-bd9c-d8104c00a331","name":"Sticky Note4","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-464,-864]},{"parameters":{"method":"POST","url":"https://whatsapi.typebot.pro/message/sendText/ASGARDACADEMY","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"b4d71f9c38e3ac12a6b08e4b6d53aa90"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n    \"number\": \"120363047102471901@g.us\",\n    \"text\": \"‚ö†Ô∏èPRE√áO AGORA‚ö†Ô∏è\\nüíµ PRE√áOS EST√ÉO EM D√ìLAR\\n‚è±Ô∏è FREQU√äNCIA DE ENVIO: 1 HORA\\n\\n{{ $('Code9').item.json.message }}\\n\\nüî∞ Moeda: {{ $json.symbol }}\\nValor: {{ $json.price }}\\n\\nüëâ ESTA √â UMA MENSAGEM AUTOM√ÅTICA N√ÉO √â INDICA√á√ÉO DE COMPRA üëà\"\n}","options":{}},"id":"9c8c96eb-44e3-4595-b3f3-dc3185e5e550","name":"ENVIA NO GRUPO DO WHATSAPP","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[784,-688],"retryOnFail":true,"onError":"continueErrorOutput"},{"parameters":{},"type":"n8n-nodes-base.noOp","typeVersion":1,"position":[1200,-704],"id":"ee2514a3-1ab4-4d43-b5ff-6b3e97e0f6c5","name":"No Operation, do nothing"},{"parameters":{"method":"POST","url":"https://notify.typebot.pro/SANTOBET","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Title","value":"ERRO FLUXO CRYPTO"}]},"sendBody":true,"contentType":"raw","rawContentType":"text/html","body":"ERRO AO ENVIAR MENSAGEM CRYPTO - CONFERIR WHATSAPP","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1008,-544],"id":"137e92ec-9286-44b9-9c32-f621f82ea61c","name":"NOTIFY CADASTRO","retryOnFail":false,"waitBetweenTries":3000,"onError":"continueRegularOutput"},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[-576,128],"id":"1372fe38-c0c2-46b7-806f-c458acf18ed8","name":"Google Gemini Chat Model","credentials":{"googlePalmApi":{"id":"W9iqAHpJXispMNuH","name":"GEMINI JAMIL"}}},{"parameters":{"promptType":"define","text":"={{ $json.body.data.message.conversation }}\n\nRESPONDA A ESTA DUVIDA USANDO A TOOLS EXISTENTES.\nSEMPRE RESPONDA COM CORDIALIDADE\n\nFORMATO DE SA√çDA DA MENSAGEM\nü™ô MOEDA: Bitcoin\nüí≤ VALOR USD: 117279.25\n\nVARIA√á√ïES:\n‚è≥ √öltima 1 hora: 0.97%\n‚è≥ √öltimas 24 horas: 0.13%\n‚è≥ √öltimos 7 dias: -1.03%\n‚è≥ √öltimos 30 dias: 8.98%","options":{}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.1,"position":[-512,-96],"id":"27085953-daab-4da4-b38f-b9a776bae8fc","name":"AI Agent"},{"parameters":{"toolDescription":"Use esta ferramenta para obter o valor da moeda solicitada\nuse a id necessaria pegando abaixo no cambo \"id\"\n\nIDs para Busca\nID\tS√≠mbolo\tNome\n1\tBTC\tBitcoin\n1027\tETH\tEthereum\n825\tUSDT\tTether\n3408\tUSDC\tUSD Coin\n5426\tSOL\tSolana\n1839\tBNB\tBNB (ex-Binance)\n4687\tADA\tCardano\n2010\tADA\tCardano\n74\tDOGE\tDogecoin\n52\tXRP\tXRP\n3890\tMATIC\tPolygon\n7083\tUNI\tUniswap\n5994\tSHIB\tShiba Inu\n3957\tTRX\tTRON\n3717\tAPT\tAptos\n5429\tAVAX\tAvalanche\n6636\tDOT\tPolkadot\n5805\tLDO\tLido DAO\n4943\tDAI\tDAI\n1975\tLINK\tChainlink\n1831\tBCH\tBitcoin Cash\n2\tLTC\tLitecoin\n7278\tAAVE\tAave\n1966\tETC\tEthereum Classic\n2502\tOKB\tOKB\n4030\tALGO\tAlgorand\n7129\tCAKE\tPancakeSwap\n4066\tCHZ\tChiliz\n5997\tFTM\tFantom\n5665\tXLM\tStellar\n\n\n## FORMATO DE SA√çDA DA MENSAGEM\nü™ô MOEDA: Bitcoin\nüí≤ VALOR USD: 117279.25\n\nVARIA√á√ïES:\n‚è≥ √öltima 1 hora: 0.97%\n‚è≥ √öltimas 24 horas: 0.13%\n‚è≥ √öltimos 7 dias: -1.03%\n‚è≥ √öltimos 30 dias: 8.98%","url":"=https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest","sendQuery":true,"queryParameters":{"parameters":[{"name":"id","value":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters0_Value', ``, 'string') }}"},{"name":"convert","value":"USD"}]},"sendHeaders":true,"headerParameters":{"parameters":[{"name":"X-CMC_PRO_API_KEY","value":"724c5bfe-e3a8-44b2-8c1d-9723046c6ebf"},{"name":"Accept","value":"application/json"}]},"options":{}},"type":"n8n-nodes-base.httpRequestTool","typeVersion":4.2,"position":[-208,128],"id":"11274484-7a23-41c6-b94e-e1121104c57c","name":"OBTER VALOR CRYPTO"},{"parameters":{"sessionIdType":"customKey","sessionKey":"1"},"type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","typeVersion":1.3,"position":[-384,128],"id":"70128101-11e6-4c49-8919-125aecb9fdd3","name":"Simple Memory"},{"parameters":{"content":"## AGENTE VIRTUAL DE PRE√áOS EM CRYPTO","height":848,"width":2832},"type":"n8n-nodes-base.stickyNote","position":[-1392,-256],"typeVersion":1,"id":"fe7f026f-6531-44ec-9ce4-4555c590827f","name":"Sticky Note1"},{"parameters":{"httpMethod":"POST","path":"cryptovalor","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2,"position":[-1296,32],"id":"7758c4ca-752f-4791-a686-7ad91dc9f43d","name":"Webhook","webhookId":"c4076307-5197-4ec1-a64b-c58c9b3d2c80","disabled":true},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"f4a7630c-d6af-44c7-b375-3e3a81503c5f","leftValue":"={{ $json.body.data.key.remoteJid }}","rightValue":"120363047102471901@g.us","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}},{"id":"3d1b701e-ed8c-4323-a0eb-e37b9e2790f4","leftValue":"={{ $json.body.data.message.conversation }}","rightValue":"*","operator":{"type":"string","operation":"contains"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-1024,32],"id":"4653bec6-b00c-4a2a-9fa1-2a8547ebb0ec","name":"If"},{"parameters":{},"type":"n8n-nodes-base.noOp","typeVersion":1,"position":[272,-96],"id":"a10017d5-cfaf-469c-993f-72e518310b43","name":"No Operation, do nothing1"},{"parameters":{"method":"POST","url":"https://notify.typebot.pro/SANTOBET","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Title","value":"ERRO FLUXO CRYPTO"}]},"sendBody":true,"contentType":"raw","rawContentType":"text/html","body":"ERRO AO ENVIAR MENSAGEM CRYPTO - CONFERIR WHATSAPP","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[288,128],"id":"323b1bea-59e2-4b52-a6ad-f2349a56bc71","name":"NOTIFY CADASTRO1","retryOnFail":false,"waitBetweenTries":3000,"onError":"continueRegularOutput"},{"parameters":{"method":"POST","url":"={{ $('Webhook').item.json.body.server_url }}/message/sendText/{{ $('Webhook').item.json.body.instance }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"=b4d71f9c38e3ac12a6b08e4b6d53aa90"}]},"sendBody":true,"bodyParameters":{"parameters":[{"name":"number","value":"={{ $('Webhook').item.json.body.data.key.remoteJid }}"},{"name":"text","value":"={{ $('AI Agent').item.json.output }}"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-48,-96],"id":"259a5964-f2ee-4c5d-b388-938db01d8441","name":"HTTP Request"},{"parameters":{},"type":"n8n-nodes-base.noOp","typeVersion":1,"position":[-576,304],"id":"0b99953a-5add-46b6-8df8-c5fed61ac8c0","name":"No Operation, do nothing2"}],"connections":{"Schedule Trigger1":{"main":[[{"node":"cod_moedas","type":"main","index":0}]]},"Split Out":{"main":[[{"node":"moedas","type":"main","index":0}]]},"moedas":{"main":[[{"node":"Code8","type":"main","index":0}]]},"Code8":{"main":[[{"node":"Aggregate2","type":"main","index":0}]]},"Aggregate2":{"main":[[{"node":"Code9","type":"main","index":0}]]},"Code9":{"main":[[{"node":"DOLAR AGORA","type":"main","index":0}]]},"DOLAR AGORA":{"main":[[{"node":"ENVIA NO GRUPO DO WHATSAPP","type":"main","index":0}]]},"PUXAR VALOR CRYPTO":{"main":[[{"node":"Split Out","type":"main","index":0}]]},"cod_moedas":{"main":[[{"node":"Code","type":"main","index":0}]]},"Code":{"main":[[{"node":"PUXAR VALOR CRYPTO","type":"main","index":0}]]},"ENVIA NO GRUPO DO WHATSAPP":{"main":[[{"node":"No Operation, do nothing","type":"main","index":0}],[{"node":"NOTIFY CADASTRO","type":"main","index":0}]]},"NOTIFY CADASTRO":{"main":[[{"node":"No Operation, do nothing","type":"main","index":0}]]},"Google Gemini Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"OBTER VALOR CRYPTO":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"Simple Memory":{"ai_memory":[[{"node":"AI Agent","type":"ai_memory","index":0}]]},"Webhook":{"main":[[{"node":"If","type":"main","index":0}]]},"If":{"main":[[{"node":"AI Agent","type":"main","index":0}],[{"node":"No Operation, do nothing2","type":"main","index":0}]]},"AI Agent":{"main":[[{"node":"HTTP Request","type":"main","index":0}]]},"NOTIFY CADASTRO1":{"main":[[]]},"HTTP Request":{"main":[[{"node":"No Operation, do nothing1","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{"node:Schedule Trigger":{"recurrenceRules":[]},"node:Schedule Trigger1":{"recurrenceRules":[]}},"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"1f0034a0-64b5-4b96-987e-74f74dd198be","triggerCount":1,"tags":[]}