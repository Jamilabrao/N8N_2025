{"createdAt":"2025-01-09T21:19:21.803Z","updatedAt":"2025-05-16T13:06:30.202Z","id":"DEEyv6hYNjIheRLS","name":"PRE√áO DO BITCOIN","active":true,"nodes":[{"parameters":{"rule":{"interval":[{"field":"hours"}]}},"id":"619cb727-a037-451b-b21d-b7d9e1af1548","name":"Schedule Trigger1","type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.2,"position":[-1320,-780]},{"parameters":{"fieldToSplitOut":"data","options":{}},"id":"ebf45e91-e1a5-4e43-abd9-84c86478b142","name":"Split Out","type":"n8n-nodes-base.splitOut","typeVersion":1,"position":[-400,-780]},{"parameters":{"jsCode":"// Obt√©m os dados do n√≥ anterior no formato padr√£o do n8n\nlet items = $input.all();\n\n// Mapeia cada item e formata os valores\nlet formattedData = items.map(item => {\n  let data = item.json; // Acessa o objeto JSON de cada item\n  return {\n    moeda: data.moeda,\n    valor: parseFloat(data.valor).toFixed(2), // Formata o valor com duas casas decimais\n    ultimas24hrs: parseFloat(data.ultimas24hrs).toFixed(2), // Formata ultimas24hrs com duas casas decimais\n    ultimahora: parseFloat(data.ultimahora).toFixed(2), // Formata ultimahora com duas casas decimais\n    setedias: parseFloat(data.setedias).toFixed(2), // Formata ultimahora com duas casas decimais\n    trintadias: parseFloat(data.trintadias).toFixed(2) // Formata ultimahora com duas casas decimais\n  };\n});\n\n// Retorna os dados formatados para o pr√≥ximo n√≥\nreturn formattedData.map(data => ({ json: data }));\n"},"id":"ba284c93-3a0f-4d93-9fca-6da5739395d9","name":"Code8","type":"n8n-nodes-base.code","typeVersion":2,"position":[-40,-780]},{"parameters":{"assignments":{"assignments":[{"id":"38581cef-c52b-462c-b674-170201fc9896","name":"moeda","value":"={{ $json.name }}","type":"string"},{"id":"690b76b4-bcee-429a-b019-9ef7737a5fda","name":"valor","value":"={{ $json.quote.USD.price }}","type":"string"},{"id":"101bdd32-b97c-4897-94c0-2156170513dd","name":"ultimas24hrs","value":"={{ $json.quote.USD.percent_change_24h }}","type":"string"},{"id":"15f07c6e-f7c1-4ad1-b160-f02d5fb365c3","name":"ultimahora","value":"={{ $json.quote.USD.percent_change_1h }}","type":"string"},{"id":"f17a1feb-448d-4bf2-a8bb-0afe4fb33d1e","name":"setedias","value":"={{ $json.quote.USD.percent_change_7d }}","type":"string"},{"id":"88f95195-293a-4582-86ed-9833fb866acb","name":"trintadias","value":"={{ $json.quote.USD.percent_change_30d }}","type":"string"}]},"options":{}},"id":"bf4192b7-5b3e-4f12-a4f7-e5af5eff933c","name":"moedas","type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-220,-780]},{"parameters":{"aggregate":"aggregateAllItemData","options":{}},"id":"5cc152c9-ee36-4f59-8e97-8ef24be75557","name":"Aggregate2","type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[120,-780]},{"parameters":{"jsCode":"// Obt√©m os dados do n√≥ anterior\nlet items = $input.all();\n\n// Extrai os dados do JSON\nlet data = items[0].json.data;\n\n// Monta a mensagem formatada com \\\\n para as quebras de linha\nlet message = data.map(item => {\n  return `üî∞ Moeda: ${item.moeda}\\\\nValor: ${item.valor}\\\\nUltima Hora: ${item.ultimahora}%\\\\nUltimas 24hrs: ${item.ultimas24hrs}%\\\\n7 Dias: ${item.setedias}%\\\\n30 Dias: ${item.trintadias}%`;\n}).join('\\\\n\\\\n'); // Junta cada bloco com uma quebra de linha dupla\n\n// Retorna a mensagem formatada como um √∫nico item\nreturn {\n  json: {\n    message: message.trim() // Remove qualquer quebra de linha extra no final\n  }\n};\n"},"id":"2cda290d-eb79-477a-a999-49feab08ddde","name":"Code9","type":"n8n-nodes-base.code","typeVersion":2,"position":[380,-680]},{"parameters":{"url":"https://data-api.binance.vision/api/v3/ticker/price?symbol=USDTBRL","options":{}},"id":"0f309721-a5cf-44d1-af31-87f551b1f31c","name":"DOLAR AGORA","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[560,-680],"retryOnFail":true},{"parameters":{"content":"```\n ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà    ‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà        ‚ñà‚ñà     ‚ñà‚ñà ‚ñà‚ñà   ‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà \n‚ñà‚ñà      ‚ñà‚ñà   ‚ñà‚ñà  ‚ñà‚ñà  ‚ñà‚ñà  ‚ñà‚ñà   ‚ñà‚ñà    ‚ñà‚ñà    ‚ñà‚ñà    ‚ñà‚ñà       ‚ñà‚ñà     ‚ñà‚ñà ‚ñà‚ñà   ‚ñà‚ñà ‚ñà‚ñà   ‚ñà‚ñà    ‚ñà‚ñà    ‚ñà‚ñà      \n‚ñà‚ñà      ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà    ‚ñà‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà     ‚ñà‚ñà    ‚ñà‚ñà    ‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà  ‚ñà  ‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà    ‚ñà‚ñà    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà \n‚ñà‚ñà      ‚ñà‚ñà   ‚ñà‚ñà    ‚ñà‚ñà    ‚ñà‚ñà         ‚ñà‚ñà    ‚ñà‚ñà    ‚ñà‚ñà       ‚ñà‚ñà ‚ñà‚ñà‚ñà ‚ñà‚ñà ‚ñà‚ñà   ‚ñà‚ñà ‚ñà‚ñà   ‚ñà‚ñà    ‚ñà‚ñà         ‚ñà‚ñà \n ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà   ‚ñà‚ñà    ‚ñà‚ñà    ‚ñà‚ñà         ‚ñà‚ñà     ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà         ‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà  ‚ñà‚ñà   ‚ñà‚ñà ‚ñà‚ñà   ‚ñà‚ñà    ‚ñà‚ñà    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà \n                                                                                                    \n                                                                                                    \n","height":133.75120767772074,"width":929.4682783318663,"color":3},"id":"9b21cc59-1eec-4862-a7d2-d5feb3e31527","name":"Sticky Note","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-340,-1040]},{"parameters":{"content":"## CRIA A MENSSAGEM DE ACORDO COM O QUE RECEBE\n## BAIXA VALOR DO DOLAR EM REAL\n## ENVIA NO GRUPO DO WHATSAPP","height":362,"width":814},"id":"cfaadacf-4bf3-4776-9eac-ac0c0620f7f0","name":"Sticky Note2","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[320,-860]},{"parameters":{"url":"https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest","sendQuery":true,"queryParameters":{"parameters":[{"name":"id","value":"={{ $json.resultado }}"},{"name":"convert","value":"USD"}]},"sendHeaders":true,"headerParameters":{"parameters":[{"name":"X-CMC_PRO_API_KEY","value":"724c5bfe-e3a8-44b2-8c1d-9723046c6ebf"},{"name":"Accept","value":"application/json"}]},"options":{}},"id":"ef9c9842-bcca-4b26-9ec7-e852fc711942","name":"PUXAR VALOR CRYPTO","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-660,-780]},{"parameters":{"assignments":{"assignments":[{"id":"38581cef-c52b-462c-b674-170201fc9896","name":"BTC","value":"1","type":"string"},{"id":"690b76b4-bcee-429a-b019-9ef7737a5fda","name":"XRP","value":"1027","type":"string"},{"id":"101bdd32-b97c-4897-94c0-2156170513dd","name":"ETHEREUM","value":"52","type":"string"},{"id":"15f07c6e-f7c1-4ad1-b160-f02d5fb365c3","name":"SOLANA","value":"5426","type":"string"},{"id":"dc41a9dd-7fe0-4547-a1d5-007cd534b8eb","name":"DOGCOIN","value":"74","type":"string"},{"id":"1abec304-6a63-426a-af48-d8dfa0aaef36","name":"CARDANO","value":"2010","type":"string"},{"id":"67d3ea9f-25b1-480e-b30b-4522b070fd66","name":"BNB","value":"1839","type":"string"}]},"options":{}},"id":"6f6d71a8-4169-4851-8282-9d0cce117756","name":"cod_moedas","type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-1100,-780]},{"parameters":{"jsCode":"const data = $input.item.json; \n\n// Pega os valores do objeto e os junta com v√≠rgula\nconst resultado = Object.values(data).join(\",\");\n\nreturn {\n  json: {\n    resultado: resultado\n  }\n};\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-880,-780],"id":"9ac63b47-93d9-46a8-be2a-4d57ddfe700a","name":"Code"},{"parameters":{"content":"## DEFINA ID DAS MOEDAS UISANDO O UCID DA COINMARKETCAP","height":282,"width":874,"color":4},"id":"72b604a4-66b9-4d97-ac2d-a58754de2d1a","name":"Sticky Note3","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-1360,-860]},{"parameters":{"content":"## RECEBE E TRATA AS INFORMA√á√ïES","height":282,"width":754,"color":3},"id":"ab6f9d48-ba5d-46c6-bd9c-d8104c00a331","name":"Sticky Note4","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-460,-860]},{"parameters":{"method":"POST","url":"https://whatsapi.typebot.pro/message/sendText/ASGARDACADEMY","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"b4d71f9c38e3ac12a6b08e4b6d53aa90"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n    \"number\": \"120363047102471901@g.us\",\n    \"text\": \"‚ö†Ô∏èPRE√áO AGORA‚ö†Ô∏è\\nüíµ PRE√áOS EST√ÉO EM D√ìLAR\\n‚è±Ô∏è FREQU√äNCIA DE ENVIO: 1 HORA\\n\\n{{ $('Code9').item.json.message }}\\n\\nüî∞ Moeda: {{ $json.symbol }}\\nValor: {{ $json.price }}\\n\\nüëâ ESTA √â UMA MENSAGEM AUTOM√ÅTICA N√ÉO √â INDICA√á√ÉO DE COMPRA üëà\"\n}","options":{}},"id":"9c8c96eb-44e3-4595-b3f3-dc3185e5e550","name":"ENVIA NO GRUPO DO WHATSAPP","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[780,-680],"retryOnFail":true,"onError":"continueErrorOutput"},{"parameters":{},"type":"n8n-nodes-base.noOp","typeVersion":1,"position":[1200,-700],"id":"ee2514a3-1ab4-4d43-b5ff-6b3e97e0f6c5","name":"No Operation, do nothing"},{"parameters":{"method":"POST","url":"https://notify.typebot.pro/teste123","authentication":"genericCredentialType","genericAuthType":"httpBasicAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Title","value":"ERRO FLUXO BITCOIN"}]},"sendBody":true,"contentType":"raw","rawContentType":"text/html","body":"=O FLUXO N√ÉO CONSEGUIU ENVIAR A MENSAGEM PELA EVOLUTION API\n","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1000,-560],"id":"d696f8af-df7b-43c8-8a4d-bd56cad7bd2e","name":"NOTIFY PIX","credentials":{"httpBasicAuth":{"id":"cUb7pyXy5tejKNVF","name":"Notify-jamil"}}}],"connections":{"Schedule Trigger1":{"main":[[{"node":"cod_moedas","type":"main","index":0}]]},"Split Out":{"main":[[{"node":"moedas","type":"main","index":0}]]},"moedas":{"main":[[{"node":"Code8","type":"main","index":0}]]},"Code8":{"main":[[{"node":"Aggregate2","type":"main","index":0}]]},"Aggregate2":{"main":[[{"node":"Code9","type":"main","index":0}]]},"Code9":{"main":[[{"node":"DOLAR AGORA","type":"main","index":0}]]},"DOLAR AGORA":{"main":[[{"node":"ENVIA NO GRUPO DO WHATSAPP","type":"main","index":0}]]},"PUXAR VALOR CRYPTO":{"main":[[{"node":"Split Out","type":"main","index":0}]]},"cod_moedas":{"main":[[{"node":"Code","type":"main","index":0}]]},"Code":{"main":[[{"node":"PUXAR VALOR CRYPTO","type":"main","index":0}]]},"ENVIA NO GRUPO DO WHATSAPP":{"main":[[{"node":"No Operation, do nothing","type":"main","index":0}],[{"node":"NOTIFY PIX","type":"main","index":0}]]},"NOTIFY PIX":{"main":[[{"node":"No Operation, do nothing","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{"node:Schedule Trigger":{"recurrenceRules":[]},"node:Schedule Trigger1":{"recurrenceRules":[]}},"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"4e34efeb-8f58-4662-b4b4-cb4d08d45ada","triggerCount":1,"tags":[]}